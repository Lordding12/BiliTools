"use strict";var t=require("path"),e=require("zlib"),n=require("fs"),r=require("json5"),o=require("nodemailer"),i=require("tunnel"),a=require("axios"),s=require("crypto");function c(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}function u(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}})),e.default=t,Object.freeze(e)}var f=u(t),l=u(r),p=u(o),d=u(i),g=c(a),m=u(s),h="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},y=function(t){return t&&t.Math==Math&&t},v=y("object"==typeof globalThis&&globalThis)||y("object"==typeof window&&window)||y("object"==typeof self&&self)||y("object"==typeof h&&h)||function(){return this}()||Function("return this")(),_={},w=function(t){try{return!!t()}catch(t){return!0}},b=!w((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),T=!w((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),$=T,O=Function.prototype.call,I=$?O.bind(O):function(){return O.apply(O,arguments)},S={},E={}.propertyIsEnumerable,C=Object.getOwnPropertyDescriptor,P=C&&!E.call({1:2},1);S.f=P?function(t){var e=C(this,t);return!!e&&e.enumerable}:E;var x,A,R=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},L=T,U=Function.prototype,k=U.bind,j=U.call,N=L&&k.bind(j,j),B=L?function(t){return t&&N(t)}:function(t){return t&&function(){return j.apply(t,arguments)}},G=B,D=G({}.toString),M=G("".slice),q=function(t){return M(D(t),8,-1)},H=B,K=w,Y=q,F=v.Object,J=H("".split),Q=K((function(){return!F("z").propertyIsEnumerable(0)}))?function(t){return"String"==Y(t)?J(t,""):F(t)}:F,W=v.TypeError,z=function(t){if(null==t)throw W("Can't call method on "+t);return t},X=Q,V=z,Z=function(t){return X(V(t))},tt=function(t){return"function"==typeof t},et=tt,nt=function(t){return"object"==typeof t?null!==t:et(t)},rt=v,ot=tt,it=function(t){return ot(t)?t:void 0},at=function(t,e){return arguments.length<2?it(rt[t]):rt[t]&&rt[t][e]},st=B({}.isPrototypeOf),ct=v,ut=at("navigator","userAgent")||"",ft=ct.process,lt=ct.Deno,pt=ft&&ft.versions||lt&&lt.version,dt=pt&&pt.v8;dt&&(A=(x=dt.split("."))[0]>0&&x[0]<4?1:+(x[0]+x[1])),!A&&ut&&(!(x=ut.match(/Edge\/(\d+)/))||x[1]>=74)&&(x=ut.match(/Chrome\/(\d+)/))&&(A=+x[1]);var gt=A,mt=w,ht=!!Object.getOwnPropertySymbols&&!mt((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&gt&&gt<41})),yt=ht&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,vt=at,_t=tt,wt=st,bt=yt,Tt=v.Object,$t=bt?function(t){return"symbol"==typeof t}:function(t){var e=vt("Symbol");return _t(e)&&wt(e.prototype,Tt(t))},Ot=v.String,It=function(t){try{return Ot(t)}catch(t){return"Object"}},St=tt,Et=It,Ct=v.TypeError,Pt=function(t){if(St(t))return t;throw Ct(Et(t)+" is not a function")},xt=Pt,At=function(t,e){var n=t[e];return null==n?void 0:xt(n)},Rt=I,Lt=tt,Ut=nt,kt=v.TypeError,jt={exports:{}},Nt=v,Bt=Object.defineProperty,Gt=function(t,e){try{Bt(Nt,t,{value:e,configurable:!0,writable:!0})}catch(n){Nt[t]=e}return e},Dt=Gt,Mt=v["__core-js_shared__"]||Dt("__core-js_shared__",{}),qt=Mt;(jt.exports=function(t,e){return qt[t]||(qt[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.22.7",mode:"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.22.7/LICENSE",source:"https://github.com/zloirock/core-js"});var Ht=z,Kt=v.Object,Yt=function(t){return Kt(Ht(t))},Ft=Yt,Jt=B({}.hasOwnProperty),Qt=Object.hasOwn||function(t,e){return Jt(Ft(t),e)},Wt=B,zt=0,Xt=Math.random(),Vt=Wt(1..toString),Zt=function(t){return"Symbol("+(void 0===t?"":t)+")_"+Vt(++zt+Xt,36)},te=v,ee=jt.exports,ne=Qt,re=Zt,oe=ht,ie=yt,ae=ee("wks"),se=te.Symbol,ce=se&&se.for,ue=ie?se:se&&se.withoutSetter||re,fe=function(t){if(!ne(ae,t)||!oe&&"string"!=typeof ae[t]){var e="Symbol."+t;oe&&ne(se,t)?ae[t]=se[t]:ae[t]=ie&&ce?ce(e):ue(e)}return ae[t]},le=I,pe=nt,de=$t,ge=At,me=function(t,e){var n,r;if("string"===e&&Lt(n=t.toString)&&!Ut(r=Rt(n,t)))return r;if(Lt(n=t.valueOf)&&!Ut(r=Rt(n,t)))return r;if("string"!==e&&Lt(n=t.toString)&&!Ut(r=Rt(n,t)))return r;throw kt("Can't convert object to primitive value")},he=fe,ye=v.TypeError,ve=he("toPrimitive"),_e=function(t,e){if(!pe(t)||de(t))return t;var n,r=ge(t,ve);if(r){if(void 0===e&&(e="default"),n=le(r,t,e),!pe(n)||de(n))return n;throw ye("Can't convert object to primitive value")}return void 0===e&&(e="number"),me(t,e)},we=$t,be=function(t){var e=_e(t,"string");return we(e)?e:e+""},Te=nt,$e=v.document,Oe=Te($e)&&Te($e.createElement),Ie=function(t){return Oe?$e.createElement(t):{}},Se=Ie,Ee=!b&&!w((function(){return 7!=Object.defineProperty(Se("div"),"a",{get:function(){return 7}}).a})),Ce=b,Pe=I,xe=S,Ae=R,Re=Z,Le=be,Ue=Qt,ke=Ee,je=Object.getOwnPropertyDescriptor;_.f=Ce?je:function(t,e){if(t=Re(t),e=Le(e),ke)try{return je(t,e)}catch(t){}if(Ue(t,e))return Ae(!Pe(xe.f,t,e),t[e])};var Ne={},Be=b&&w((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Ge=v,De=nt,Me=Ge.String,qe=Ge.TypeError,He=function(t){if(De(t))return t;throw qe(Me(t)+" is not an object")},Ke=b,Ye=Ee,Fe=Be,Je=He,Qe=be,We=v.TypeError,ze=Object.defineProperty,Xe=Object.getOwnPropertyDescriptor;Ne.f=Ke?Fe?function(t,e,n){if(Je(t),e=Qe(e),Je(n),"function"==typeof t&&"prototype"===e&&"value"in n&&"writable"in n&&!n.writable){var r=Xe(t,e);r&&r.writable&&(t[e]=n.value,n={configurable:"configurable"in n?n.configurable:r.configurable,enumerable:"enumerable"in n?n.enumerable:r.enumerable,writable:!1})}return ze(t,e,n)}:ze:function(t,e,n){if(Je(t),e=Qe(e),Je(n),Ye)try{return ze(t,e,n)}catch(t){}if("get"in n||"set"in n)throw We("Accessors not supported");return"value"in n&&(t[e]=n.value),t};var Ve=Ne,Ze=R,tn=b?function(t,e,n){return Ve.f(t,e,Ze(1,n))}:function(t,e,n){return t[e]=n,t},en={exports:{}},nn=b,rn=Qt,on=Function.prototype,an=nn&&Object.getOwnPropertyDescriptor,sn=rn(on,"name"),cn={EXISTS:sn,PROPER:sn&&"something"===function(){}.name,CONFIGURABLE:sn&&(!nn||nn&&an(on,"name").configurable)},un=tt,fn=Mt,ln=B(Function.toString);un(fn.inspectSource)||(fn.inspectSource=function(t){return ln(t)});var pn,dn,gn,mn=fn.inspectSource,hn=tt,yn=mn,vn=v.WeakMap,_n=hn(vn)&&/native code/.test(yn(vn)),wn=jt.exports,bn=Zt,Tn=wn("keys"),$n=function(t){return Tn[t]||(Tn[t]=bn(t))},On={},In=_n,Sn=v,En=B,Cn=nt,Pn=tn,xn=Qt,An=Mt,Rn=$n,Ln=On,Un=Sn.TypeError,kn=Sn.WeakMap;if(In||An.state){var jn=An.state||(An.state=new kn),Nn=En(jn.get),Bn=En(jn.has),Gn=En(jn.set);pn=function(t,e){if(Bn(jn,t))throw new Un("Object already initialized");return e.facade=t,Gn(jn,t,e),e},dn=function(t){return Nn(jn,t)||{}},gn=function(t){return Bn(jn,t)}}else{var Dn=Rn("state");Ln[Dn]=!0,pn=function(t,e){if(xn(t,Dn))throw new Un("Object already initialized");return e.facade=t,Pn(t,Dn,e),e},dn=function(t){return xn(t,Dn)?t[Dn]:{}},gn=function(t){return xn(t,Dn)}}var Mn={set:pn,get:dn,has:gn,enforce:function(t){return gn(t)?dn(t):pn(t,{})},getterFor:function(t){return function(e){var n;if(!Cn(e)||(n=dn(e)).type!==t)throw Un("Incompatible receiver, "+t+" required");return n}}},qn=w,Hn=tt,Kn=Qt,Yn=b,Fn=cn.CONFIGURABLE,Jn=mn,Qn=Mn.enforce,Wn=Mn.get,zn=Object.defineProperty,Xn=Yn&&!qn((function(){return 8!==zn((function(){}),"length",{value:8}).length})),Vn=String(String).split("String"),Zn=en.exports=function(t,e,n){"Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!Kn(t,"name")||Fn&&t.name!==e)&&zn(t,"name",{value:e,configurable:!0}),Xn&&n&&Kn(n,"arity")&&t.length!==n.arity&&zn(t,"length",{value:n.arity});try{n&&Kn(n,"constructor")&&n.constructor?Yn&&zn(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var r=Qn(t);return Kn(r,"source")||(r.source=Vn.join("string"==typeof e?e:"")),t};Function.prototype.toString=Zn((function(){return Hn(this)&&Wn(this).source||Jn(this)}),"toString");var tr=tt,er=tn,nr=en.exports,rr=Gt,or={},ir=Math.ceil,ar=Math.floor,sr=Math.trunc||function(t){var e=+t;return(e>0?ar:ir)(e)},cr=function(t){var e=+t;return e!=e||0===e?0:sr(e)},ur=cr,fr=Math.max,lr=Math.min,pr=cr,dr=Math.min,gr=function(t){return t>0?dr(pr(t),9007199254740991):0},mr=function(t){return gr(t.length)},hr=Z,yr=function(t,e){var n=ur(t);return n<0?fr(n+e,0):lr(n,e)},vr=mr,_r=function(t){return function(e,n,r){var o,i=hr(e),a=vr(i),s=yr(r,a);if(t&&n!=n){for(;a>s;)if((o=i[s++])!=o)return!0}else for(;a>s;s++)if((t||s in i)&&i[s]===n)return t||s||0;return!t&&-1}},wr={includes:_r(!0),indexOf:_r(!1)},br=Qt,Tr=Z,$r=wr.indexOf,Or=On,Ir=B([].push),Sr=function(t,e){var n,r=Tr(t),o=0,i=[];for(n in r)!br(Or,n)&&br(r,n)&&Ir(i,n);for(;e.length>o;)br(r,n=e[o++])&&(~$r(i,n)||Ir(i,n));return i},Er=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Cr=Sr,Pr=Er.concat("length","prototype");or.f=Object.getOwnPropertyNames||function(t){return Cr(t,Pr)};var xr={};xr.f=Object.getOwnPropertySymbols;var Ar=at,Rr=or,Lr=xr,Ur=He,kr=B([].concat),jr=Ar("Reflect","ownKeys")||function(t){var e=Rr.f(Ur(t)),n=Lr.f;return n?kr(e,n(t)):e},Nr=Qt,Br=jr,Gr=_,Dr=Ne,Mr=function(t,e,n){for(var r=Br(e),o=Dr.f,i=Gr.f,a=0;a<r.length;a++){var s=r[a];Nr(t,s)||n&&Nr(n,s)||o(t,s,i(e,s))}},qr=w,Hr=tt,Kr=/#|\.prototype\./,Yr=function(t,e){var n=Jr[Fr(t)];return n==Wr||n!=Qr&&(Hr(e)?qr(e):!!e)},Fr=Yr.normalize=function(t){return String(t).replace(Kr,".").toLowerCase()},Jr=Yr.data={},Qr=Yr.NATIVE="N",Wr=Yr.POLYFILL="P",zr=Yr,Xr=v,Vr=_.f,Zr=tn,to=function(t,e,n,r){r||(r={});var o=r.enumerable,i=void 0!==r.name?r.name:e;return tr(n)&&nr(n,i,r),r.global?o?t[e]=n:rr(e,n):(r.unsafe?t[e]&&(o=!0):delete t[e],o?t[e]=n:er(t,e,n)),t},eo=Gt,no=Mr,ro=zr,oo=function(t,e){var n,r,o,i,a,s=t.target,c=t.global,u=t.stat;if(n=c?Xr:u?Xr[s]||eo(s,{}):(Xr[s]||{}).prototype)for(r in e){if(i=e[r],o=t.dontCallGetSet?(a=Vr(n,r))&&a.value:n[r],!ro(c?r:s+(u?".":"#")+r,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;no(i,o)}(t.sham||o&&o.sham)&&Zr(i,"sham",!0),to(n,r,i,t)}},io=Ne.f,ao=Qt,so=fe("toStringTag"),co=v,uo=function(t,e,n){t&&!n&&(t=t.prototype),t&&!ao(t,so)&&io(t,so,{configurable:!0,value:e})};oo({global:!0},{Reflect:{}}),uo(co.Reflect,"Reflect",!0);const fo=["æ£","æ£å","æ£è¶","å æ²¹~","UPå æ²¹!","æ¯æ~","æ¯ææ¯æï¼","å¬æ´å¦","é¡¶é¡¶","çä¸èå°~","å¹²æ¯","bilibiliå¹²æ¯","o(*ï¿£â½ï¿£*)o","(ï½¡ï½¥âï½¥)ï¾ï¾å¨","(âËâËâ)","( â¢Ì Ï â¢Ì )y","(à¸ â¢_â¢)à¸",">.<","^_~"],lo=["è°","è¹","èªæµ·","ä»£éå¸","ä¼æ å¸","èªæ","ç§","åç","å¾","æç£","è½¦è½¦ä¸å±","åæ¥ä¸å±","æ¸¸æéå·"],po=["è°¢"],go=[65566781,1277481241,1643654862,603676925],mo=Object.prototype.toString;function ho(t,e){return mo.call(t)===`[object ${e}]`}function yo(t){return null!==t&&ho(t,"Object")}function vo(t){return ho(t,"String")}function _o(t){return"function"==typeof t}function wo(t){const e=t||bo(),n=e.getFullYear(),r=e.getMonth()+1;return 2===r?n%4==0&&n%100!=0||n%400==0?29:28:[4,6,9,11].includes(r)?30:31}function bo(){const t=new Date,e=t.getTime(),n=t.getTimezoneOffset()/60;return new Date(e+36e5*(n+8))}function To(t,e){return Math.ceil(e/t)}function $o(t,e,n){if(n&&"boolean"!=typeof n&&(e=n=void 0),void 0===n&&("boolean"==typeof e?(n=e,e=void 0):"boolean"==typeof t&&(n=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):void 0===e&&(e=t,t=0),t>e){const n=t;t=e,e=n}if(n||t%1||e%1){const n=Math.random();return Math.min(t+n*(e-t+parseFloat("1e-"+((n+"").length-1))),e)}return t+Math.floor(Math.random()*(e-t+1))}function Oo(){return`${$o(1,9)}${function(t,e){let n="";for(let e=0;e<t;e++)n+=xo("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ");return e?n.toLowerCase():n}(10,!0)}0`}function Io(t,e){t.includes(e)||t.push(e)}function So(t){return t||{}}function Eo(t,e=!1){return"object"!=typeof t?t:Array.isArray(t)?t.map((t=>Eo(t,e))):e?Object.keys(t).reduce(((n,r)=>(n[r]=Eo(t[r],e),n)),{}):Object.assign({},t)}function Co(t,e){return void 0===t||void 0===e?t||e:yo(t)&&yo(e)?Array.isArray(t)&&Array.isArray(e)?t.concat(e):Object.keys(e).reduce(((n,r)=>(n[r]=Co(t[r],e[r]),n)),t):e}function Po(t){const e=new URLSearchParams;return Object.keys(t).forEach((n=>{e.append(n,String(t[n]))})),e.toString()}function xo(t){return t[$o(t.length-1)]}function Ao(t){return t?t.split("; ").map((t=>t.split("="))):[]}function Ro(t,e){return t?e&&0!==e.length?function(t){const e=Object.keys(t).reduce(((e,n)=>e+`${n}=${t[n]}; `),"");return e.substring(0,e.length-2||0)}(function(t,e){const n=Ao(null==e?void 0:e[0]).filter((t=>2===t.length)),r=Ao(t).concat(n).filter((t=>2===t.length)),o={};for(const t of r)o[t[0]]?o[t[0]]=t[1]:Object.defineProperty(o,t[0],{value:t[1],enumerable:!0,writable:!0});return o}(t,e)):t:""}function Lo(t,e){if(!t)return null;const n=`(?:^|)${e}=([^;]*)(?:;|$)`,r=t.match(n);return r?r[1]:null}function Uo(t){return Lo(t,"bili_jct")||""}var ko=T,jo=Function.prototype,No=jo.apply,Bo=jo.call,Go="object"==typeof Reflect&&Reflect.apply||(ko?Bo.bind(No):function(){return Bo.apply(No,arguments)}),Do=v,Mo=tt,qo=Do.String,Ho=Do.TypeError,Ko=B,Yo=He,Fo=function(t){if("object"==typeof t||Mo(t))return t;throw Ho("Can't set "+qo(t)+" as a prototype")},Jo=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Ko(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return Yo(n),Fo(r),e?t(n,r):n.__proto__=r,n}}():void 0),Qo=Ne.f,Wo=tt,zo=nt,Xo=Jo,Vo={};Vo[fe("toStringTag")]="z";var Zo=v,ti="[object z]"===String(Vo),ei=tt,ni=q,ri=fe("toStringTag"),oi=Zo.Object,ii="Arguments"==ni(function(){return arguments}()),ai=ti?ni:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=oi(t),ri))?n:ii?ni(e):"Object"==(r=ni(e))&&ei(e.callee)?"Arguments":r},si=ai,ci=v.String,ui=function(t){if("Symbol"===si(t))throw TypeError("Cannot convert a Symbol value to a string");return ci(t)},fi=function(t,e){return void 0===t?arguments.length<2?"":e:ui(t)},li=nt,pi=tn,di=function(t,e){li(e)&&"cause"in e&&pi(t,"cause",e.cause)},gi=Error,mi=B("".replace),hi=String(gi("zxcasd").stack),yi=/\n\s*at [^:]*:[^\n]*/,vi=yi.test(hi),_i=function(t,e){if(vi&&"string"==typeof t&&!gi.prepareStackTrace)for(;e--;)t=mi(t,yi,"");return t},wi=R,bi=!w((function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",wi(1,7)),7!==t.stack)})),Ti=at,$i=Qt,Oi=tn,Ii=st,Si=Jo,Ei=Mr,Ci=function(t,e,n){n in t||Qo(t,n,{configurable:!0,get:function(){return e[n]},set:function(t){e[n]=t}})},Pi=function(t,e,n){var r,o;return Xo&&Wo(r=e.constructor)&&r!==n&&zo(o=r.prototype)&&o!==n.prototype&&Xo(t,o),t},xi=fi,Ai=di,Ri=_i,Li=bi,Ui=b,ki=oo,ji=Go,Ni=function(t,e,n,r){var o="stackTraceLimit",i=r?2:1,a=t.split("."),s=a[a.length-1],c=Ti.apply(null,a);if(c){var u=c.prototype;if($i(u,"cause")&&delete u.cause,!n)return c;var f=Ti("Error"),l=e((function(t,e){var n=xi(r?e:t,void 0),o=r?new c(t):new c;return void 0!==n&&Oi(o,"message",n),Li&&Oi(o,"stack",Ri(o.stack,2)),this&&Ii(u,this)&&Pi(o,this,l),arguments.length>i&&Ai(o,arguments[i]),o}));l.prototype=u,"Error"!==s?Si?Si(l,f):Ei(l,f,{name:!0}):Ui&&o in c&&(Ci(l,c,o),Ci(l,c,"prepareStackTrace")),Ei(l,c);try{u.name!==s&&Oi(u,"name",s),u.constructor=l}catch(t){}return l}},Bi=v.WebAssembly,Gi=7!==Error("e",{cause:7}).cause,Di=function(t,e){var n={};n[t]=Ni(t,e,Gi),ki({global:!0,constructor:!0,arity:1,forced:Gi},n)},Mi=function(t,e){if(Bi&&Bi[t]){var n={};n[t]=Ni("WebAssembly."+t,e,Gi),ki({target:"WebAssembly",stat:!0,constructor:!0,arity:1,forced:Gi},n)}};Di("Error",(function(t){return function(e){return ji(t,this,arguments)}})),Di("EvalError",(function(t){return function(e){return ji(t,this,arguments)}})),Di("RangeError",(function(t){return function(e){return ji(t,this,arguments)}})),Di("ReferenceError",(function(t){return function(e){return ji(t,this,arguments)}})),Di("SyntaxError",(function(t){return function(e){return ji(t,this,arguments)}})),Di("TypeError",(function(t){return function(e){return ji(t,this,arguments)}})),Di("URIError",(function(t){return function(e){return ji(t,this,arguments)}})),Mi("CompileError",(function(t){return function(e){return ji(t,this,arguments)}})),Mi("LinkError",(function(t){return function(e){return ji(t,this,arguments)}})),Mi("RuntimeError",(function(t){return function(e){return ji(t,this,arguments)}}));const qi={value:""},Hi={log:Ki,error:function(t){Ki("error",t)},warn:function(t){Ki("warn",t)},info:function(t){Ki("info",t)},verbose:function(t){Ki("verbose",t)},debug:function(t){Ki("debug",t)}};function Ki(t,e){const n=bo().toString().match(/\w{2}:\w{2}:\w{2}/)[0];if(function(t="debug"){const e=["error","warn","info","verbose","debug"],n=e.indexOf(t);return n>0?e.slice(0,n+1):e}().includes(t)){const t=`[${n}] ${e}`;qi.value+=t+"\n"}process.stdout.write(`[${t} ${n}] ${e}\n`)}function Yi(t){try{const n=e.unzipSync(Buffer.from(t,"base64")).toString();try{return decodeURIComponent(function(t){return t.replace(/\\u([\d\w]{4})/gi,((t,e)=>String.fromCodePoint(parseInt(e,16))))}(n))}catch(t){return unescape(n)}}catch(t){throw new Error("Error: å½åå­ç¬¦ä¸²ä¸è½è¢«Gzipè§£å")}}const Fi=()=>process.env.QL_BRANCH;class Ji{static configFileName=function(){const t=Fi()?"cat_bili_config":"config",e=".json",{BILITOOLS_FILE_NAME:n}=process.env;return n?n.endsWith(e)?n:`${n}.json`:t+e}();static isQingLongPanel=Fi()}const Qi=l.default?l.default:l;function Wi(t){try{let e;if((n.existsSync(t)||n.existsSync(t+="5"))&&(e=n.readFileSync(t,"utf-8")),!e)return;return Hi.verbose(`è¯»åéç½®æä»¶ ${t}`),Qi.parse(e)}catch(t){!function(t){if(!vo(t))return;throw new TypeError("éç½®æä»¶å­å¨ï¼ä½æ¯æ æ³è§£æï¼å¯è½ JSON5 æ ¼å¼ä¸æ­£ç¡®ï¼")}(t.message)}}const zi=t=>f.resolve(process.cwd(),t),Xi=t=>f.resolve(__dirname,"../",t);function Vi(t){throw new Error(t||"è·åéç½®å¤±è´¥ï¼æªæ¾å°éç½®æä»¶ï¼")}const Zi=Array.from(new Set([zi("./config/config.dev.json"),zi(`./config/${Ji.configFileName}`),zi(`./${Ji.configFileName}`),Xi(`./config/${Ji.configFileName}`),Xi(`./${Ji.configFileName}`)])),ta=["./config.json",zi("./config/config.json")];function ea(t){let e;const n=Array.isArray(t);if(e=n?t:t.account.filter((t=>t.cookie)),0===e.length)return;if(Ji.isQingLongPanel)return function(t){const e=process.argv.find((t=>t.includes("--item")||t.includes("-i")||t.includes("-I")));if(!e)return t[0];const n=Number(e.split("=")[1])-1;return!n||n>=t.length||n<0?(Hi.warn("ä¼¼ä¹æ³è¦æå®ä¸ä¸ªä¸å­å¨çç¨æ·ï¼æä»¬å°æå®ç¬¬ä¸ä¸ªç¨æ·"),t[0]):t[n]}(e);Hi.warn("å¨åç¨æ·åºæ¯ä¸éç½®äºå¤ç¨æ·ï¼æä»¬å°æ¾å¼å¤ä½çéç½®");const r=e[0];return n||(r.message=Object.assign(t.message||{},r.message)),r}function na(){if(globalThis.BILITOOLS_CONFIG)return globalThis.BILITOOLS_CONFIG;Ji.isQingLongPanel&&Zi.splice(0,1,...ta);for(let t=0;t<Zi.length;t++){const e=Wi(Zi[t]);if(e)return e}return(()=>{const{BILITOOLS_CONFIG:t,BILI_SCF_CONFIG:e,BILI_CONFIG:n}=process.env,r=t||e||n;if(r)try{return Qi.parse(Yi(r))}catch{Vi("ç¯å¢ä¸­çéç½®ä¸æ¯ææç JSON å­ç¬¦ä¸²ï¼")}})()}function ra(t){if(t||Vi(),function(t){if(Array.isArray(t))return!0;return Boolean(t.account&&t.account.length)}(t)){const e=ea(t);if(e)return e}return t.cookie||Vi("éç½®æä»¶ä¸­æ²¡æ cookieï¼"),t}function oa(t){return t&&t.map((t=>Number(t))).filter((t=>t>0&&t%1==0))}class ia{constructor(t){var e,n,r,o,i,a,s,c,u;this.config=t,this.COOKIE=t.cookie,this.BILIJCT=Uo(t.cookie),this.USERID=(u=t.cookie,Number(Lo(u,"DedeUserID"))||0),this.USER_AGENT=t.userAgent;const f=null!==(e=t.apiDelay)&&void 0!==e?e:[2,6];this.BILI_API_DELAY=Array.isArray(f)?oa(f):[Number(f)];const l=So(t.message);this.MESSAGE_API=l.api,this.PUSHPLUS_TOKEN=l.pushplusToken||process.env.PUSHPLUS_TOKEN;const p=So(t.coin);this.BILI_CUSTOMIZE_UP=oa(p.customizeUp||t.customizeUp)||[],this.BILI_UPPER_ACC_MATCH=!1!==(null!==(n=p.upperAccMatch)&&void 0!==n?n:t.upperAccMatch),this.BILI_COIN_RETRY_NUM=p.retryNum||t.coinRetryNum||4,this.BILI_TARGET_LEVEL=null!==(r=p.targetLevel||t.targetLevel)&&void 0!==r?r:6,this.BILI_STAY_COINS=null!==(o=p.stayCoins||t.stayCoins)&&void 0!==o?o:0,this.BILI_TARGET_COINS=null!==(i=p.targetCoins||t.targetCoins)&&void 0!==i?i:5;const d=So(t.gift);this.BILI_GIFT_UP=oa(d.mids||t.giftUp)||this.BILI_CUSTOMIZE_UP||[];const g=So(t.charge);this.CHARGE_ID=g.mid||t.chargeUpId||this.USERID,this.CHARGE_PRESET_TIME=g.presetTime||t.chargePresetTime||31;const m=So(t.match);this.MATCH_COINS=null!==(a=m.coins||t.matchCoins)&&void 0!==a?a:5,this.MATCH_SELECTION=null!==(s=m.selection||t.matchSelection)&&void 0!==s?s:1,this.MATCH_DIFF=null!==(c=m.diff||t.matchDiff)&&void 0!==c?c:0;const h=So(t.lottery);this.LOTTERY_EXCLUDE=h.excludeAward||lo,this.LOTTERY_INCLUDE=h.includeAward||po,this.LOTTERY_UP_BLACKLIST=h.blackUid||go,this.LOTTERY_MOVE_TAG=h.moveTag,this.LOTTERY_PAGE_NUM=h.pageNum||2}}let aa;const sa=new Proxy({},{get:(t,e)=>(aa||ua(),Reflect.get(aa,e)),set:(t,e,n)=>"config"===e&&n?(ua(n),!0):Reflect.set(aa,e,n)});let ca=null;function ua(t){t||(t=ra(na())),aa=new ia(ra(t)),ca=class extends class{static money=0;static coinsTask=5;static share=!1;static watch=!1;static currentStartFun=0;static bCoinCouponBalance=0;static vipType=0;static userLevel=0}{},ca.coinsTask=aa.BILI_TARGET_COINS}const fa={silver2Coin:!0,liveSignTask:!0,addCoins:!0,mangaSign:!1,shareAndWatch:!0,supGroupSign:!1,liveSendMessage:!1,taskReward:!0,charging:!1,getVipPrivilege:!1,giveGift:!1,matchGame:!1,liveLottery:!1};function la(){return{...fa}}function pa(t){const e=function(){const t=la();for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const n=t[e];switch((sa.config.function||{})[e]){case!0:!1===n&&(t[e]=!0);break;case!1:!0===n&&(t[e]=!1)}}return t.addCoins||t.shareAndWatch||(t.taskReward=!1),t}();return t.map((t=>e[t.name]?t:null)).filter((t=>t))}function da(t){const e=sa.BILI_API_DELAY;let n;n=1===e.length?1e3*e[0]:1e3*$o(e[0]||2,e[1]||6),n=t||n;const r=(new Date).getTime()+parseInt(n,10);for(;(new Date).getTime()<r;);return new Promise((t=>{t("done")}))}var ga;!function(t){t[t.SUCCESS=0]="SUCCESS",t[t["åºç¨ç¨åºä¸å­å¨æå·²è¢«å°ç¦"]=-1]="åºç¨ç¨åºä¸å­å¨æå·²è¢«å°ç¦",t[t["Access Keyéè¯¯"]=-2]="Access Keyéè¯¯",t[t["APIæ ¡éªå¯åéè¯¯"]=-3]="APIæ ¡éªå¯åéè¯¯",t[t["è°ç¨æ¹å¯¹è¯¥Methodæ²¡ææé"]=-4]="è°ç¨æ¹å¯¹è¯¥Methodæ²¡ææé",t[t["è´¦å·æªç»å½"]=-101]="è´¦å·æªç»å½",t[t["è´¦å·è¢«å°å"]=-102]="è´¦å·è¢«å°å",t[t["ç§¯åä¸è¶³"]=-103]="ç§¯åä¸è¶³",t[t["ç¡¬å¸ä¸è¶³"]=-104]="ç¡¬å¸ä¸è¶³",t[t["éªè¯ç éè¯¯"]=-105]="éªè¯ç éè¯¯",t[t["è´¦å·éæ­£å¼ä¼åæå¨éåºæ"]=-106]="è´¦å·éæ­£å¼ä¼åæå¨éåºæ",t[t["åºç¨ä¸å­å¨æèè¢«å°ç¦"]=-107]="åºç¨ä¸å­å¨æèè¢«å°ç¦",t[t["æªç»å®ææº?"]=-108]="æªç»å®ææº?",t[t["æªç»å®ææº"]=-110]="æªç»å®ææº",t[t["csrf æ ¡éªå¤±è´¥"]=-111]="csrf æ ¡éªå¤±è´¥",t[t["ç³»ç»åçº§ä¸­"]=-112]="ç³»ç»åçº§ä¸­",t[t["è´¦å·å°æªå®åè®¤è¯"]=-113]="è´¦å·å°æªå®åè®¤è¯",t[t["è¯·åç»å®ææº"]=-114]="è¯·åç»å®ææº",t[t["è¯·åå®æå®åè®¤è¯"]=-115]="è¯·åå®æå®åè®¤è¯"}(ga||(ga={}));const ma="GET",ha=new Map,ya=t=>[t.method,t.url].join("&");class va{addPending(t){this.removePending(t);const e=ya(t);t.cancelToken||(t.cancelToken=new g.default.CancelToken((t=>{ha.has(e)||ha.set(e,t)})))}removeAllPending(){ha.forEach((t=>{t&&_o(t)&&t()})),ha.clear()}removePending(t){const e=ya(t);if(ha.has(e)){const t=ha.get(e);t&&_o(t)&&t(),ha.delete(e)}}reset(){ha.clear()}}class _a{constructor(t){const{requestOptions:e}=t;!1===e.withCredentials&&(t.withCredentials=!1),this.options=t,this.axiosInstance=g.default.create(t),this.setupInterceptors()}createAxiosInstance(t){this.axiosInstance=g.default.create(t)}getTransform(){return this.options.transform}getAxios(){return this.axiosInstance}configAxios(t){this.axiosInstance&&this.createAxiosInstance(t)}setHeaders(t){this.axiosInstance&&Object.assign(this.axiosInstance.defaults.headers,this.options.headers,t)}setupInterceptors(){const t=this.getTransform();if(!t)return;const{requsetInterceptors:e,requestInterceptorsCatch:n,responseInterceptors:r,responseInterceptorsCatch:o}=t,i=new va;this.axiosInstance.interceptors.request.use((t=>{var n;const{headers:{ignoreCancelToken:o}}=t;return!(o||(null===(n=this.options.requestOptions)||void 0===n?void 0:n.ignoreCancelToken))&&i.addPending(t),_o(r)&&(t=e(t,this.options)),t}),void 0),_o(n)&&this.axiosInstance.interceptors.request.use(void 0,n),this.axiosInstance.interceptors.response.use((t=>(t&&i.removePending(t.config),_o(r)&&(t=r(t)),t)),void 0),_o(o)&&this.axiosInstance.interceptors.response.use(void 0,o)}supportFormData(t){var e;const n={...this.options.headers,...t.headers};return((null==n?void 0:n["Content-Type"])||(null==n?void 0:n["content-type"])||"").includes("application/x-www-form-urlencoded")&&Reflect.has(t,"data")&&(null===(e=t.method)||void 0===e?void 0:e.toUpperCase())!==ma&&!vo(t.data)?{...t,data:Po(t.data)}:t}get(t,e){return vo(t)?this.request({...e,method:"GET",url:t}):this.request({...t,method:"GET"})}post(t,e,n){return vo(t)?this.request({...n,method:"POST",url:t,data:e}):this.request({...t,method:"POST"})}put(t,e,n){return this.request({...n,method:"PUT",url:t,data:e})}delete(t,e,n){return this.request({...n,method:"DELETE",url:t,data:e})}patch(t,e,n){return this.request({...n,method:"PATCH",url:t,data:e})}request(t){let e=Eo(t,!0);const n=this.getTransform(),{requestOptions:r}=this.options,o=Object.assign({},r,t.requestOptions),{beforeRequestHook:i,requestCatchHook:a,transformRequestHook:s}=n||{};return _o(i)&&(e=i(e,o)),e.requestOptions=o,e=this.supportFormData(e),new Promise(((t,n)=>{this.axiosInstance.request(e).then((e=>{if(_o(s))try{const n=s(e,o);t(n)}catch(t){n(t||new Error("è¯·æ±éè¯¯!"))}else t(e)})).catch((t=>{_o(a)?n(a(t,o)):n(t)}))}))}}const wa="https://account.bilibili.com",ba="https://live.bilibili.com",Ta="https://space.bilibili.com",$a="https://www.bilibili.com/",Oa="https://account.bilibili.com",Ia="https://api.live.bilibili.com",Sa="https://api.bilibili.com",Ea="https://manga.bilibili.com",Ca="https://api.vc.bilibili.com",Pa={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.41 Safari/537.36 Edg/101.0.1210.32","content-type":"application/x-www-form-urlencoded; charset=UTF-8","accept-language":"zh-CN,zh;q=0.9"};var xa=[["/twirp/activity.v1.Activity/ClockIn","ERR_BAD_REQUEST"]];const Aa={transformRequestHook:(t,e)=>{const{isTransformResponse:n,isReturnNativeResponse:r}=e;if(r)return t;if(!n)return t.data;const{data:o}=t;return e.isJsonp&&vo(o)?function(t){const e=t.replace(/^\w+\(/,"").replace(/\)$/,"");return JSON.parse(e)}(o):o},beforeRequestHook:(t,e)=>{var n;const{apiUrl:r}=e;r&&vo(r)&&(t.url.startsWith("/")&&r.endsWith("/")?t.url=r+t.url.substring(1):t.url.startsWith("/")||r.endsWith("/")?t.url=`${r}${t.url}`:t.url=`${r}/${t.url}`);const o=t.params||{},i=t.data||!1;return(null===(n=t.method)||void 0===n?void 0:n.toUpperCase())!==ma&&(vo(o)?(t.url=t.url+o,t.params=void 0):Reflect.has(t,"data")&&t.data?(t.data=i,t.params=o):(t.data=o,t.params=void 0)),t},requsetInterceptors:t=>{const{requestOptions:e}=t;return!0===e.withBiliCookie&&(t.headers.Cookie=sa.COOKIE),t},responseInterceptors:t=>{var e;t.config.requestOptions.withBiliCookie&&(sa.COOKIE=Ro(sa.COOKIE,(null===(e=t.headers)||void 0===e?void 0:e["set-cookie"])||[]));return t},responseInterceptorsCatch:async t=>{const{requestOptions:e,url:n}=t.config;return xa.find((e=>e[0]===n&&e[1]===t.code))||0===e.retry?Promise.reject(t):(e.retry||(e.retry=2),e.__retryCount=e.__retryCount||0,e.__retryCount>=e.retry?Promise.reject(t):(e.__retryCount+=1,await da(e.retryDelay||100),await Ua.request(t.config)))}};function Ra(t){return new _a(Co({timeout:1e4,headers:{"Content-Type":Pa["content-type"],"User-Agent":Pa["user-agent"],"accept-language":Pa["accept-language"]},transform:Aa,requestOptions:{isReturnNativeResponse:!1,isTransformResponse:!0,ignoreCancelToken:!0,retry:2,withBiliCookie:!0},withCredentials:!0},t||{}))}const La=Ra({requestOptions:{withBiliCookie:!1}}),Ua=Ra();function ka(){var t;const e=(null===(t=sa.config)||void 0===t?void 0:t.message)||{};["GOBOT_URL","GOBOT_TOKEN","GOBOT_QQ","SCKEY","QQ_SKEY","QQ_MODE","BARK_PUSH","BARK_SOUND","BARK_GROUP","TG_BOT_TOKEN","TG_USER_ID","TG_PROXY_AUTH","TG_PROXY_HOST","TG_PROXY_PORT","TG_API_HOST","DD_BOT_TOKEN","DD_BOT_SECRET","QYWX_KEY","QYWX_AM","IGOT_PUSH_KEY","PUSH_PLUS_TOKEN","PUSH_PLUS_USER"].forEach((t=>{const n=e[(r=t,r.toLowerCase().replace(/_(\w)/g,((t,e)=>e.toUpperCase())))]||e[t]||process.env[t];var r;n&&(process.env[t]=n)})),sa.PUSHPLUS_TOKEN&&(process.env.PUSH_PLUS_TOKEN=sa.PUSHPLUS_TOKEN),function(){process.env.PUSH_KEY&&(ja=process.env.PUSH_KEY);process.env.QQ_SKEY&&(Za=process.env.QQ_SKEY);process.env.QQ_MODE&&(ts=process.env.QQ_MODE);process.env.BARK_PUSH?(Na=process.env.BARK_PUSH.indexOf("https")>-1||process.env.BARK_PUSH.indexOf("http")>-1?process.env.BARK_PUSH:`https://api.day.app/${process.env.BARK_PUSH}`,process.env.BARK_SOUND&&(Ba=process.env.BARK_SOUND),process.env.BARK_GROUP&&(Ga=process.env.BARK_GROUP)):Na&&-1===Na.indexOf("https")&&-1===Na.indexOf("http")&&(Na=`https://api.day.app/${Na}`);process.env.TG_BOT_TOKEN&&(Da=process.env.TG_BOT_TOKEN);process.env.TG_USER_ID&&(Ma=process.env.TG_USER_ID);process.env.TG_PROXY_AUTH&&(Ka=process.env.TG_PROXY_AUTH);process.env.TG_PROXY_HOST&&(qa=process.env.TG_PROXY_HOST);process.env.TG_PROXY_PORT&&(Ha=process.env.TG_PROXY_PORT);process.env.TG_API_HOST&&(Ya=process.env.TG_API_HOST);process.env.DD_BOT_TOKEN&&(Fa=process.env.DD_BOT_TOKEN,process.env.DD_BOT_SECRET&&(Ja=process.env.DD_BOT_SECRET));process.env.QYWX_KEY&&(Qa=process.env.QYWX_KEY);process.env.QYWX_AM&&(Wa=process.env.QYWX_AM);process.env.IGOT_PUSH_KEY&&(za=process.env.IGOT_PUSH_KEY);process.env.PUSH_PLUS_TOKEN&&(Xa=process.env.PUSH_PLUS_TOKEN);process.env.PUSH_PLUS_USER&&(Va=process.env.PUSH_PLUS_USER)}()}let ja="",Na="",Ba="",Ga="QingLong",Da="",Ma="",qa="",Ha="",Ka="",Ya="api.telegram.org",Fa="",Ja="",Qa="",Wa="",za="",Xa="",Va="",Za="",ts="";async function es(t,e){var n;const r=null===(n=sa.config.message)||void 0===n?void 0:n.email;if(!(r&&r.pass&&r.from&&r.host))return;const o=Number(r.port)||465,i=p.createTransport({host:r.host,port:o,secure:465===o,auth:{user:r.from,pass:r.pass}}),a=await i.sendMail({from:`${t} <${r.from}>`,to:r.to,subject:t,headers:{"Content-Type":"text/plain; charset=utf-8"},text:e.replace(/\n/g,"\r\n")});Hi.info(`é®ä»¶æ¶æ¯å·²åé: ${a.messageId}`)}async function ns(t,e){try{const n=sa.MESSAGE_API;if(!n)return;const r=n.replace("{title}",t).replace("{text}",e);await La.get(r)}catch(t){Hi.info(`èªå®ä¹æ¥å£æ¶æ¯åéå¤±è´¥: ${t}`),Hi.error(t)}}function rs(t,e,n=2100){return new Promise((r=>{if(ja){e=e.replace(/[\n\r]/g,"\n\n");const o={url:ja.includes("SCT")?`https://sctapi.ftqq.com/${ja}.send`:`https://sc.ftqq.com/${ja}.send`,params:`text=${t}&desp=${e}`,headers:{"Content-Type":"application/x-www-form-urlencoded"},timeout:15e3};setTimeout((()=>{La.post(o).then((t=>{0===t.errno||0===t.data.errno?Hi.info("serveré±åééç¥æ¶æ¯æåð"):1024===t.errno?Hi.info(`serveré±åééç¥æ¶æ¯å¼å¸¸: ${t.errmsg}`):Hi.info(`serveré±åééç¥æ¶æ¯å¼å¸¸\n${JSON.stringify(t)}`)})).catch((t=>{Hi.info("åééç¥è°ç¨APIå¤±è´¥ï¼ï¼"),Hi.info(t)})).finally((()=>{r("")}))}),n)}else r("")}))}function os(t,e){return new Promise((n=>{if(Za){const r={url:`https://push.xuthus.cc/${ts}/${Za}`,headers:{"Content-Type":"application/json"},data:{},params:{}};t=t.replace(/äº¬è±/g,"è±è±"),e=(e=(e=e.replace(/äº¬è±/g,"")).replace(/ð¶/g,"")).replace(/çº¢å/g,"Hå"),"email"===ts?r.data={t:t,c:e}:r.params=`${t}\n\n${e}`;const o=function(t){switch(t){case"send":return"ä¸ªäºº";case"group":return"QQç¾¤";case"wx":return"å¾®ä¿¡";case"ww":return"ä¼ä¸å¾®ä¿¡";case"email":return"é®ä»¶";default:return"æªç¥æ¹å¼"}};La.post(r).then((t=>{200===t.code?Hi.info(`é·æ¨åé${o(ts)}éç¥æ¶æ¯æåð`):400===t.code?Hi.info(`QQé·æ¨(Cool Push)åé${o(ts)}æ¨éå¤±è´¥ï¼${t.msg}`):503===t.code?Hi.info(`QQé·æ¨åºéï¼${t.message}ï¼${t.data}`):Hi.info(`é·æ¨æ¨éå¼å¸¸: ${JSON.stringify(t)}`)})).catch((t=>{Hi.info(`åé${o(ts)}éç¥è°ç¨APIå¤±è´¥ï¼ï¼`),Hi.info(t)})).finally((()=>{n("")}))}else n("")}))}function is(t,e,n={}){return new Promise((r=>{if(Na){const o={url:`${Na}/${encodeURIComponent(t)}/${encodeURIComponent(e)}?sound=${Ba}&group=${Ga}&${Po(n)}`,headers:{"Content-Type":"application/x-www-form-urlencoded"},timeout:15e3};La.get(o).then((t=>{200===t.code?Hi.info("Bark APPåééç¥æ¶æ¯æåð"):Hi.info(`Bark APPåééå¤±è´¥ï¼${t.message}`)})).catch((t=>{Hi.info("Bark APPåééç¥è°ç¨APIå¤±è´¥ï¼ï¼"),Hi.error(t)})).finally((()=>{r("")}))}r("")}))}function as(t,e){return new Promise((n=>{if(Da&&Ma){const r={url:`https://${Ya}/bot${Da}/sendMessage`,params:`chat_id=${Ma}&text=${t}\n\n${e}&disable_web_page_preview=true`,headers:{"Content-Type":"application/x-www-form-urlencoded"},timeout:15e3};if(qa&&Ha){const t=d.httpsOverHttp({proxy:{host:qa,port:+Ha,proxyAuth:Ka}});Object.assign(r,{httpsAgent:t})}La.post(r).then((t=>{t.ok?Hi.info("Telegramåééç¥æ¶æ¯æåðã"):400===t.error_code?Hi.info("è¯·ä¸»å¨ç»botåéä¸æ¡æ¶æ¯å¹¶æ£æ¥æ¥æ¶ç¨æ·IDæ¯å¦æ­£ç¡®ã"):401===t.error_code&&Hi.info("Telegram bot token å¡«åéè¯¯ã")})).catch((t=>{Hi.info("telegramåééç¥æ¶æ¯å¤±è´¥ï¼ï¼"),Hi.info(t)})).finally((()=>{n("")}))}else n("")}))}function ss(t,e){return new Promise((n=>{const r={url:`https://oapi.dingtalk.com/robot/send?access_token=${Fa}`,data:{msgtype:"text",text:{content:` ${t}\n\n${e}`}},headers:{"Content-Type":"application/json"},timeout:15e3};if(Fa){if(Ja){const t=require("crypto"),e=Date.now(),n=t.createHmac("sha256",Ja);n.update(`${e}\n${Ja}`);const o=encodeURIComponent(n.digest("base64"));r.url=`${r.url}&timestamp=${e}&sign=${o}`}La.post(r).then((t=>{0===t.errcode?Hi.info("ééåééç¥æ¶æ¯æåðã"):Hi.info(`ééåééç¥å¤±è´¥ï¼${t.errmsg}`)})).catch((t=>{Hi.info("ééåééç¥æ¶æ¯å¤±è´¥ï¼ï¼"),Hi.info(t)})),n("")}else n("")}))}function cs(t,e){return new Promise((n=>{const r={url:`https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=${Qa}`,data:{msgtype:"text",text:{content:` ${t}\n\n${e}`}},headers:{"Content-Type":"application/json"},timeout:15e3};Qa&&La.post(r).then((t=>{0===t.errcode?Hi.info("ä¼ä¸å¾®ä¿¡åééç¥æ¶æ¯æåðã"):Hi.info(`ä¼ä¸å¾®ä¿¡åééç¥å¤±è´¥ï¼${t.errmsg}`)})).catch((t=>{Hi.info("ä¼ä¸å¾®ä¿¡åééç¥æ¶æ¯å¤±è´¥ï¼ï¼"),Hi.info(t)})).finally((()=>{n("")})),n("")}))}function us(t){const e=Wa.split(",");if(e[2]){const n=e[2].split("|");let r="";for(let e=0;e<n.length;e++){const o="ç­¾å°å· "+(e+1);t.match(o)&&(r=n[e])}return r||(r=e[2]),r}return"@all"}function fs(t,e){return new Promise((n=>{if(Wa){const r=Wa.split(","),o={url:"https://qyapi.weixin.qq.com/cgi-bin/gettoken",data:{corpid:`${r[0]}`,corpsecret:`${r[1]}`},headers:{"Content-Type":"application/json"},timeout:15e3};La.post(o).then((o=>{const i=e.replace(/\n/g,"<br/>"),a=JSON.parse(o).access_token;let s;switch(r[4]){case"0":s={msgtype:"textcard",textcard:{title:`${t}`,description:`${e}`,url:"https://github.com/whyour/qinglong",btntxt:"æ´å¤"}};break;case"1":s={msgtype:"text",text:{content:`${t}\n\n${e}`}};break;default:s={msgtype:"mpnews",mpnews:{articles:[{title:`${t}`,thumb_media_id:`${r[4]}`,author:"æºè½å©æ",content_source_url:"",content:`${i}`,digest:`${e}`}]}}}r[4]||(s={msgtype:"text",text:{content:`${t}\n\n${e}`}}),s={url:`https://qyapi.weixin.qq.com/cgi-bin/message/send?access_token=${a}`,data:{touser:`${us(e)}`,agentid:`${r[3]}`,safe:"0",...s},headers:{"Content-Type":"application/json"}},La.post(s).then((t=>{0===t.errcode?Hi.info("æåID:"+us(e)+"ä¼ä¸å¾®ä¿¡åºç¨æ¶æ¯åééç¥æ¶æ¯æåðã"):Hi.info(`ä¼ä¸å¾®ä¿¡åºç¨ï¼${t.errmsg}`)})).catch((t=>{Hi.info("æåID:"+us(e)+"ä¼ä¸å¾®ä¿¡åºç¨æ¶æ¯åééç¥æ¶æ¯å¤±è´¥ï¼ï¼"),Hi.info(t)})).finally((()=>{n("")}))})).catch((t=>{Hi.error("ä¼ä¸å¾®ä¿¡åºç¨æ¶æ¯åééç¥æ¶æ¯å¤±è´¥ï¼ï¼")}))}else n("")}))}function ls(t,e,n={}){return new Promise((r=>{if(za){if(!new RegExp("^[a-zA-Z0-9]{24}$").test(za))return Hi.info("æ¨ææä¾çIGOT_PUSH_KEYæ æ"),void r("");const o={url:`https://push.hellyw.com/${za.toLowerCase()}`,params:`title=${t}&content=${e}&${Po(n)}`,headers:{"Content-Type":"application/x-www-form-urlencoded"},timeout:15e3};La.post(o).then((t=>{"string"==typeof t&&(t=JSON.parse(t)),0===t.ret?Hi.info("iGotåééç¥æ¶æ¯æåð"):Hi.info(`iGotåééç¥æ¶æ¯å¤±è´¥ï¼${t.errMsg}`)})).catch((t=>{Hi.info("åééç¥è°ç¨APIå¤±è´¥ï¼ï¼"),Hi.info(t)})).finally((()=>{r("")}))}else r("")}))}function ps(t,e){return new Promise((n=>{if(Xa){e=e.replace(/[\n\r]/g,"<br>");const r={url:"https://www.pushplus.plus/send",params:{token:`${Xa}`,title:`${t}`,content:`${e}`,topic:`${Va}`},headers:{"Content-Type":" application/json"},timeout:15e3};La.post(r).then((t=>{200===t.code?Hi.info(`push+åé${Va?"ä¸å¯¹å¤":"ä¸å¯¹ä¸"}éç¥æ¶æ¯å®æã`):Hi.info(`push+åé${Va?"ä¸å¯¹å¤":"ä¸å¯¹ä¸"}éç¥æ¶æ¯å¤±è´¥ï¼${t.msg}`)})).catch((t=>{Hi.info(`push+åé${Va?"ä¸å¯¹å¤":"ä¸å¯¹ä¸"}éç¥æ¶æ¯å¤±è´¥ï¼ï¼`),Hi.info(t)})).finally((()=>{n("")}))}else n("")}))}async function ds(t,e){Hi.info("----ãæ¶æ¯æ¨éã----"),t=`Bili-${ca.nickname}-${t}`,await async function(t,e,n={},r){ka(),e+=r,await Promise.all([rs(t,e),ps(t,e)]),await Promise.all([is(t,e,n),as(t,e),ss(t,e),cs(t,e),fs(t,e),ls(t,e,n),es(t,e),ns(t,e),os(t,e)])}(t,e,void 0,"")}const gs=Ra({baseURL:Oa,headers:{"User-Agent":sa.USER_AGENT}}),ms=Ra({baseURL:Ia,headers:{Referer:$a,"User-Agent":sa.USER_AGENT}}),hs=Ra({baseURL:Sa,headers:{Referer:$a,"User-Agent":sa.USER_AGENT}}),ys=Ra({baseURL:Ea,headers:{"User-Agent":sa.USER_AGENT}}),vs=Ra({baseURL:Ca,headers:{"User-Agent":sa.USER_AGENT}});function _s(t=3394945){const e=(new Date).getTime();return ms.get(`/xlive/web-room/v1/gift/bag_list?t=${e}&room_id=${t}`)}function ws(t=1,e=10){return t>10&&(t=10),ms.get(`/xlive/app-ucenter/v1/user/GetMyMedals?page=${t}&page_size=${e}`)}function bs({ruid:t,gift_num:e,bag_id:n,gift_id:r,roomid:o}){const i=sa.BILIJCT,a=i,s={gift_id:r,ruid:t,gift_num:e,bag_id:n,biz_id:o,rnd:(new Date).getTime(),send_ruid:0,storm_beat_id:0,metadata:"",price:0,visit_id:"",csrf:i,platform:"pc",biz_code:"Live",csrf_token:a,uid:sa.USERID};return ms.post("/xlive/revenue/v2/gift/sendBag",s,{headers:{Origin:ba}})}function Ts(){return hs.get("/x/web-interface/nav",{headers:{Origin:wa}})}function $s(){return hs.get("/x/web-interface/coin/today/exp")}function Os(t=1,e=50,n){return hs.get("/x/relation/tag",{params:{tagid:n,pn:t,ps:e}})}function Is(t,e){return hs.post("/x/relation/tags/addUsers?cross_domain=true",{fids:t,tagids:e,csrf:sa.BILIJCT},{headers:{Origin:Ta}})}function Ss(t){const e=t.level_info,n=e.current_level;if(n>=sa.BILI_TARGET_LEVEL&&(ca.coinsTask=0),Hi.info(`å½åç­çº§: ${e.current_level}`),n>=6){const t=sa.config.function;t.shareAndWatch=!1,t.addCoins=!1,t.taskReward=!1,Hi.info("å·²ç»æ»¡çº§ï¼ä¸éè¦åæå¸äºï¼åä¸ªç½å«æªå§")}else{const t=e.next_exp-e.current_exp;Hi.info(`è·ç¦»åçº§è¿éè¦ ${t} ç»éªï¼é¢è®¡ ${function(t){if(sa.BILI_TARGET_COINS<=0)return t/15;const e=10*sa.BILI_TARGET_COINS+15,n=t/e,r=ca.money/(sa.BILI_TARGET_COINS-1);return n<r?Math.floor(n):(t-r*e)/25+r}(t).toFixed(2)} å¤©`)}}async function Es(t){try{var e;const{data:n}=await gs.get("/site/getCoin");Hi.info(`ç»å½æå: ${t.uname}`),Hi.info(`ç¡¬å¸ä½é¢: ${n.money||0}`),ca.nickname=function(t){const e=t.length;return e<=3?t:`${t[0]}**${t[e-1]}`}(t.uname),ca.money=n.money||0,ca.userLevel=t.level_info.current_level,ca.bCoinCouponBalance=(null===(e=t.wallet)||void 0===e?void 0:e.coupon_balance)||0,Ss(t),function(t){let e="";switch(ca.vipType=t.vipType,t.vipType){case 0:e="æ å¤§ä¼å";break;case 1:e="æåº¦å¤§ä¼å";break;case 2:e="å¹´åº¦å¤§ä¼å"}0===t.vipStatus&&(e="æ å¤§ä¼å"===e?e:e+"[å·²è¿æ]"),Hi.info(`å¤§ä¼åç¶æ: ${e}`)}(t)}catch(t){Hi.error(`è·åç¡¬å¸ä¿¡æ¯å¼å¸¸: ${t.message}`),Hi.debug(t)}}function Cs(t,e,n=1){return hs.post("/x/web-interface/coin/add",{aid:t,multiply:e,selectLike:n,csrf:sa.BILIJCT})}function Ps(t,e=1){return Ua.post("https://www.bilibili.com/audio/music-service-c/web/coin/add",{sid:t,multiply:e,csrf:sa.BILIJCT})}const xs="video",As="audio",Rs="article";async function Ls(t=!0){try{const r=sa.USERID,{data:o,message:i,code:a}=await(t?Os(e,n,-10):function(t,e,n,r,o){return hs.get("/x/relation/followings",{params:{vmid:t,pn:e,ps:n,order:r,order_type:o}})}(r)),s=t?o:o.list;if(!s||0===s.length)return{msg:"-1",data:{}};if(0===a){await da();const{mid:t}=xo(s)||{};return await js(t)}return{msg:t?`æªè·åå°ç¹å«å³æ³¨åè¡¨: ${a}-${i}`:`æªè·åå°å³æ³¨åè¡¨: ${a}-${i}`,data:{}}}catch(t){return{msg:t.message,data:{}}}var e,n}async function Us(){const t=xo([1,3,4,5,160,22,119]);try{const{data:e,message:n,code:r}=await function(t,e){return hs.get("/x/web-interface/ranking/region",{params:{rid:t,day:e}})}(t,3);if(0==r){const{aid:t,title:n,author:r}=xo(e);return{msg:"0",data:{id:Number(t),title:n,author:r}}}return{msg:`æªè·åå°æè¡ä¿¡æ¯: ${r}-${n}`,data:{}}}catch(t){return{msg:t.message,data:{}}}}async function ks(){const t=sa.BILI_CUSTOMIZE_UP;return 0===t.length?{msg:"-1",data:{}}:await js(xo(t))}async function js(t){try{const{code:e,data:n,message:r}=await function(t){return hs.get(`/x/space/navnum?mid=${t}`)}(t);if(e)return{msg:`éè¿uidè·åè§é¢å¤±è´¥: ${e}-${r}`,data:{}};await da();const{video:o,audio:i,article:a}=n,{type:s,page:c,index:u}=function([t,e,n]){const r=t+e+n;if(!r)return;const o=$o(0,r-1);let i=o;if(o<t)return{type:xs,page:To(30,i+1),index:i%30};const a=t+e;return i=o-t,o<a?{type:As,page:To(30,i+1),index:i%30}:(i=o-a,{type:Rs,page:To(12,i+1),index:i%12})}([o,i,a]),f={[xs]:Ns,[As]:Bs,[Rs]:Gs},l=await f[s](t,c,u);return l.message?{msg:l.message,data:{}}:{msg:"0",data:l}}catch(t){return Hi.debug(t),{msg:t.message,data:{}}}}async function Ns(t,e,n){const{code:r,data:o,message:i}=await function(t,e,n=1,r=""){return hs.get("/x/space/arc/search",{params:{jsonp:"jsonp",order:"pubdate",keyword:r,pn:n,tid:0,ps:e,mid:t}})}(t,30,e);if(r)return{message:i};const{aid:a,title:s,author:c}=o.list.vlist[n];return{type:xs,id:a,title:s,author:c}}async function Bs(t,e,n){const{code:r,data:o,msg:i}=await function(t,e,n=1){return hs.get("/audio/music-service/web/song/upper",{params:{jsonp:"jsonp",order:1,pn:n,ps:e,uid:t}})}(t,30,e);if(r)return{message:i};const{data:a}=o,{id:s,uname:c,title:u}=a[n];return{type:As,id:s,title:u,author:c}}async function Gs(t,e,n){const{code:r,data:o,message:i}=await function(t,e,n=1){return hs.get("/x/space/article",{params:{callback:"__test",jsonp:"jsonp",sort:"publish_time",pn:n,ps:e,mid:t},requestOptions:{isJsonp:!0}})}(t,12,e);if(r)return{message:i};const{articles:a}=o,{id:s,title:c,author:{name:u}}=a[n];return{type:Rs,id:s,title:c,author:u,mid:t}}const Ds=function(){const t=[ks,Ls,()=>Ls(!1),Us];return sa.BILI_CUSTOMIZE_UP||t.shift(),t}();async function Ms(t=0){Ds.splice(0,ca.currentStartFun+t);for(let t=0;t<Ds.length;t++){var e;const n=Ds[t];let r=Number(null!==(e=sa.BILI_COIN_RETRY_NUM)&&void 0!==e?e:4);for(r=r<1?1:r>8?8:r;r--;){await da();const t=await n();if("-1"===t.msg&&(r=0),"0"===t.msg)return t}r<=0&&(ca.currentStartFun=t)}return{msg:"-1",data:{id:0}}}async function qs({id:t,coin:e,type:n,mid:r}){const o={[xs]:Cs,[As]:Ps,[Rs]:(t,e=1)=>function(t,e,n=1){return hs.post("/x/web-interface/coin/add",{aid:e,upid:t,avtype:2,multiply:n,csrf:sa.BILIJCT})}(r,t,e)},i=await o[n](Number(t),e);return{code:i.code,message:i.message||i.msg}}async function Hs(t){if(await async function(){try{const{data:t,code:e}=await $s();if(0==e){const e=sa.BILI_TARGET_COINS-t/10;ca.coinsTask=e>0?e:0}}catch(t){}}(),ca.coinsTask<=0||ca.money<=0)return!0;const{data:e,msg:n}=await Ms(t.priority);return null!=e&&e.id&&"0"==n?(await da(),await async function(t,e){const{id:n,title:r,author:o,type:i,mid:a}=t;try{const t=await qs({id:n,type:i,mid:a});if(0===t.code)ca.money--,ca.coinsTask--,e.num++,Hi.info(`ç»[${r}--upã${o}ã]æå¸æå`);else if(34005===t.code)e.fillCount++,Hi.verbose(`å½åç¨¿ä»¶[${n}]ä¸è½åæå¸äº`),e.fillCount>=3&&(Hi.warn("èªå®ä¹ç¨æ·ç»æå¸ä¼¼ä¹æ²¡æå¸å¯æäº"),e.priority++);else{if(-111===t.code||-104===t.code)return Hi.warn(`${n} ${t.message} æ æ³ç»§ç»­è¿è¡æå¸`),!0;if(e.eCount++,Hi.warn(`ç»${n}æå¸å¤±è´¥ ${t.code} ${t.message}`),e.prevCode===t.code)return!0;e.prevCode=t.code}}catch(t){e.eCount++,Hi.error(`æå¸å¼å¸¸ ${t.message}`)}finally{await da(1500)}return!1}(e,t)):(t.eCount++,!1)}async function Ks(){try{const{data:t,code:e,message:n}=await vs.get("/link_group/v1/member/my_groups");return 0===e?(null==t?void 0:t.list)||[]:(Hi.warn(`è·åèªå·±çåºæ´å¢å¼å¸¸å¤±è´¥: ${n}`),[])}catch(t){Hi.error(`è·åèªå·±çåºæ´å¢å¼å¸¸: ${t}`)}}const Ys=["(ââ½â)","ï¼ï¿£â½ï¿£ï¼","(=ã»Ïã»=)","(ï½ã»Ïã»Â´)","(ãï¿£â³ï¿£)ã","(ï½¥âï½¥)","(Â°âÂ°)ï¾","(ï¿£3ï¿£)","â®(ï¿£â½ï¿£)â­","_(:3ãâ )_","( Â´_ãï½)","â_â","â_â","(<_<)","(>_>)","(;Â¬_Â¬)","(ï¾Ðï¾â¡ï¾Ð´ï¾)!?","Î£(ï¾Ð´ï¾;)","Î£( ï¿£â¡ï¿£||)","(Â´ï¼Ïï¼`)","ï¼/TÐT)/","(^ã»Ïã»^ )","(ï½¡ï½¥Ïï½¥ï½¡)","(âï¿£(ï½´)ï¿£â)","Îµ=Îµ=(ãâ§ââ¦)ã","(Â´ï½¥_ï½¥`)","(-_-#)","ï¼ï¿£ã¸ï¿£ï¼","(ï¿£Îµ(#ï¿£) Î£","ã½(`ÐÂ´)ï¾","ï¼#-_-)â¯ââ¯","(â¯Â°å£Â°)â¯(â´ââ´","ââ¡â","( â¥Ð´â¥)","Î£>â(ãÂ°ÏÂ°ã)â¡â","â(â ââ¢âÏââ¢â â)â","(â¬ï¾Ð´ï¾)âï¸»â»â³âä¸","ï½¥*ï½¥:â¡(ãÎµ:)","(æ±)","(è¦ç¬)"].concat("1","2","3","4","5","6","7","8","9","ç­¾å°","åå");async function Fs(){try{const{code:r,message:o,data:i}=await(t=1,e=256,n=sa.USERID,ms.get(`/xlive/app-ucenter/v1/fansMedal/panel?page=${t}&page_size=${e}&target_id=${n}`));return 0!==r?(Hi.verbose(`è·ååç« ä¿¡æ¯å¤±è´¥ ${r} ${o}`),null):i}catch(t){return Hi.error(`è·ååç« å¼å¸¸ ${t.message}`),null}var t,e,n}async function Js(t,e){const n=Ys[$o(Ys.length-1)];try{const{code:r,message:o}=await function(t,e){const n=sa.BILIJCT,r=n;return e||(e=$o(10).toString()),ms.post("/msg/send",{color:5566168,fontsize:25,mode:1,msg:e,rnd:Date.now(),roomid:t,bubble:0,csrf:n,csrf_token:r})}(t,n);return 0===r||(11e3===r?(Hi.warn(`ã${e}ã${t}-å¯è½æªå¼å¯è¯è®º`),!1):(Hi.warn(`ã${e}ã${t}-åéå¤±è´¥ ${o}`),Hi.verbose(`code: ${r}`),!1))}catch(t){Hi.verbose(`åéå¼¹å¹å¼å¸¸ ${t.message}`)}}async function Qs(){try{const{data:t,message:e,code:n}=await Ts();if(0!==n)return void Hi.warn(`è·åç¨æ·ä¿¡æ¯å¤±è´¥ï¼${n} ${e}`);!function(t){var e;ca.bCoinCouponBalance=(null===(e=t.wallet)||void 0===e?void 0:e.coupon_balance)||0}(t)}catch(t){Hi.error(`è·åç¨æ·ä¿¡æ¯å¼å¸¸ï¼${t.message}`)}}var Ws;async function zs(t){try{const e=function(t){switch(t){case 1:return"B å¸å¸";case 2:return"å¤§ä¼åä¼æ å¸";default:return""}}(t),{code:n,message:r}=await function(t){return hs.post("/x/vip/privilege/receive",{csrf:sa.BILIJCT,type:t})}(t);let o="æå";return 0===n&&(o=`å¤±è´¥ ${r}`),Hi.info(`é¢å${e} ${o}`),!0}catch(t){Hi.error(`é¢åæçåºç°å¼å¸¸ï¼${t.message}`)}return!1}async function Xs(t){let e=0,n=!1;for(;!(n||(n=await zs(t),e>2));)e++;return n}!function(t){t[t["æå"]=4]="æå",t[t["ä½äº20çµæ± "]=-2]="ä½äº20çµæ± ",t[t["Bå¸ä¸è¶³"]=-4]="Bå¸ä¸è¶³"}(Ws||(Ws={}));let Vs=0;async function Zs(){try{const{data:{list:t}}=await _s();return t.filter((t=>{if(t.expire_at<=0)return!1;const e=(1e3*t.expire_at-(new Date).getTime())/864e5<2,n=![1,30607].includes(t.gift_id);return n&&e&&Hi.info(`${t.gift_name} å³å°è¿æè¯·å°½å¿«æå`),!n&&e}))}catch(t){if(Vs)return null;await Zs(),Vs++}}async function tc(t){try{const{data:{live_room:e,name:n}}=await function(t){return hs.get(`/x/space/acc/info?mid=${t}&jsonp=jsonp`)}(t);if(await da(),e.roomStatus)return{roomid:e.roomid,name:n}}catch{}}function ec(t,e,n,r){const o=sa.BILIJCT,i={is_fav:0,main_id:e,oid:t,detail_id:n,count:r,csrf:o,csrf_token:o};return hs.post("/x/esports/guess/add",i)}function nc(){return ca.money-sa.MATCH_COINS<sa.BILI_TARGET_COINS&&(Hi.info(`éè¦ä¿ç${sa.BILI_TARGET_COINS}ä¸ªç¡¬å¸ï¼ä»»å¡ç»æ`),!0)}function rc(t,e,n,r,o){const i=Uo(sa.COOKIE),a=i,s=[(c=sa.COOKIE,Lo(c,"LIVE_BUVID")||""),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))];var c;return{ua:sa.USER_AGENT,id:[n,e,o,t],csrf_token:i,csrf:a,device:s,uname:r}}async function oc(){try{await Ua.get("https://api.live.bilibili.com/relation/v1/Feed/heartBeat")}catch{}}async function ic(t){const{data:{area_id:e,parent_area_id:n,room_id:r}}=await function(t){return ms.get(`/room/v1/Room/get_info?room_id=${t}&from=room`)}(t);return{room_id:r,area_id:e,parent_area_id:n}}async function ac(t,e){const n={id:JSON.stringify(t.id),device:JSON.stringify(t.device),ts:(new Date).getTime(),is_patch:0,heart_beat:"[]",ua:t.ua,visit_id:"",csrf:t.csrf,csrf_token:t.csrf_token};try{const{data:r,code:o}=await function(t){return Ua.post("https://live-trace.bilibili.com/xlive/data-interface/v1/x25Kn/E",t)}(n);if(0===o)return Hi.info(`è¿å¥ã${t.uname}ãçç´æ­é´`),e.v++,r}catch(t){Hi.verbose(t)}}async function sc(t,e,n){if(n.v>6)return;const r={id:JSON.stringify(e.id),device:JSON.stringify(e.device),ets:t.timestamp,benchmark:t.secret_key,time:60,ts:(new Date).getTime(),ua:e.ua},o=function(t,e){const[n,r,o,i]=JSON.parse(t.id),[a,s]=JSON.parse(t.device),{ets:c,time:u,ts:f}=t,l={platform:"web",parent_id:n,area_id:r,seq_id:o,room_id:i,buvid:a,uuid:s,ets:c,time:u,ts:f},p=t.benchmark,d=["MD5","SHA1","SHA256","SHA224","SHA512","SHA384"];let g=JSON.stringify(l);for(const t of e)g=m.createHmac(d[t],p).update(g).digest("hex");return g}(r,t.secret_rule);try{const{data:t,code:i,message:a}=await function(t){return Ua.post("https://live-trace.bilibili.com/xlive/data-interface/v1/x25Kn/X",t)}(Object.assign({visit_id:"",csrf:e.csrf,csrf_token:e.csrf_token,s:o},r));return 0===i?(Hi.info(`åã${e.uname}ãåéç¬¬${n.v}æ¬¡å¿è·³`),n.v++):Hi.warn(`åã${e.uname}ãåéç¬¬${n.v}æ¬¡å¿è·³å¤±è´¥ ${i} ${a}`),t}catch(t){Hi.verbose(t)}}async function cc(t=1,e=10){try{const{code:n,message:r,data:o}=await ws(t,e);return 0!==n?(Hi.verbose(`è·åç´æ­é´å¤±è´¥ ${n} ${r}`),null):o}catch(t){return Hi.verbose(`è·åç´æ­é´å¼å¸¸ ${t.message}`),null}}async function uc(t=!0){const e=await async function(){let t=0;try{var e,n;const{data:r,code:o}=await _s();return 0!==o||(null===(e=r.list)||void 0===e?void 0:e.length)<=0?24:(null===(n=r.list)||void 0===n||n.forEach((e=>{if(30607===e.gift_id){const n=(1e3*e.expire_at-(new Date).getTime())/864e5;n>6&&n<=7&&(t+=e.gift_num)}})),t>=24?0:24-t)}catch(t){}return 24}();let n;return t?n=await async function(){const{items:t,page_info:e}=await cc();let{total_page:n}=e;if(n&&n>1){n=n>3?3:n;for(let e=2;e<=n;e++){const n=await cc(e,10);t.push(...n.items)}}return t}():({items:n}=await cc()),{fansMedalList:n,heartNum:e}}async function fc(t,e,n,r){if(!r.v||e[n])return await oc(),await da(500),0===r.v?e[n]=await ac(t,r):e[n]=await sc(e[n],t,r),"done"}async function lc(t,e){const n=[];let r=0;for(let o=0;o<6;o++){let i=0;if(i>=e)break;const a=t.length;r=0;for(let s=0;s<a&&!(i>=e);s++){const e=(new Date).getTime(),a=t[s],{roomid:c,uname:u}=a,{room_id:f,area_id:l,parent_area_id:p}=await ic(c),d=rc(f,l,p,u,o);await fc(d,n,s,{v:o}),await da(2e3),r+=(new Date).getTime()-e,i++}o<5&&await da(6e4-r)}return"done"}async function pc(t){const{data:e,code:n}=await hs.get("/x/relation/tags?jsonp=jsonp&callback=__jp3",{headers:{Referer:"https://space.bilibili.com/1/fans/follow?tagid=0"},requestOptions:{isJsonp:!0}});if(0===n)return e.find((e=>e.name===t));Hi.warn(`è·ååç»åè¡¨å¤±è´¥: ${n}`)}async function dc(t){const e=await pc(t);if(e)return e.tagid;await da(300);const{data:n,code:r,message:o}=await(i=t,hs.post("/x/relation/tag/create",{tag:i,jsonp:"jsonp",csrf:sa.BILIJCT}));var i;if(22106===r){await da(300);const e=await pc(t);return e&&e.tagid}return 0!==r&&Hi.warn(`åå»ºåç»å¤±è´¥: ${r}-${o}`),n.tagid}async function gc(t,e,n,r=1){if(t.length>e.length)return;const{data:o,code:i,message:a}=await Os(r,20,0);if(0===i){for(const{mid:r,uname:i}of o){if(t.length>=e.length)return;if(r===n)return;(e.includes(r)||e.includes(i))&&t.push({mid:r,uname:i})}if(!(o.length<20))return await gc(t,e,n,r+1)}else Hi.warn(`è·åå³æ³¨ç¨æ·å¤±è´¥: ${i}-${a}`)}const mc=0,hc=1,yc=5,vc=1,_c=504,wc=1096;let bc;async function Tc(){try{const{data:t,code:e,message:n}=await ms.get("/xlive/web-interface/v1/index/getWebAreaList?source_id=2");return 0!==e&&Hi.info(`è·åç´æ­ååºå¤±è´¥: ${e}-${n}`),t.data.map((t=>t.list)).map((t=>t.map((t=>({areaId:t.id,parentId:t.parent_id})))))}catch(t){throw Hi.error(`è·åç´æ­ååºå¼å¸¸: ${t.message}`),t}}async function $c(t,e,n=1){try{await da(100);const{data:r,code:o,message:i}=await function(t,e,n){return ms.get(`/xlive/web-interface/v1/second/getList?platform=web&parent_area_id=${t}&area_id=${e}&page=${n}`)}(e,t,n);return 0!==o&&Hi.info(`è·åç´æ­é´åè¡¨å¤±è´¥: ${o}-${i}`),function(t){const e=[],n=[];return t.forEach((t=>{const r=t.pendant_info[2];r&&(r.pendent_id===_c?e.push(t):r.pendent_id===wc&&n.push(t))})),{lotteryTime:e,lotteryPacket:n}}(r.list).lotteryTime}catch(t){throw Hi.error(`è·åç´æ­é´åè¡¨å¼å¸¸: ${t.message}`),t}}async function Oc(t,e,n=1){const r=await $c(t,e,n),o=[];for(const t of r){const e=await Ic(t);e&&(o.push({...e,uid:t.uid,uname:t.uname}),await da(100))}return o}async function Ic(t){if(sa.LOTTERY_UP_BLACKLIST.includes(t.uid))return void Hi.info(`è·³è¿é»ååç¨æ·: ${t.uname}`);let e,n,r;try{({data:n,code:e,message:r}=await(o=t.roomid,ms.get(`/xlive/lottery-interface/v1/Anchor/Check?roomid=${o}`)))}catch(e){return void Hi.info(`ç´æ­é´${t.roomid}æ£æµå¼å¸¸: ${e.message}`)}var o;if(0!==e)return void Hi.debug(`ç´æ­é´${t.roomid}æ£æµå¤±è´¥: ${e}-${r}`);if(null===n)return;const i=sa.LOTTERY_EXCLUDE.some((t=>n.award_name.match(t)));if(!sa.LOTTERY_INCLUDE.some((t=>n.award_name.match(t)))&&i)Hi.info(`è·³è¿å±è½å¥å: ${n.award_name}`);else if(n.status!==vc);else if(n.gift_price>0);else{if(n.require_type===mc||n.require_type===hc)return n;if(n.require_type===yc&&ca.userLevel>=n.require_value)return n}}async function Sc(t){try{const{id:n,gift_id:r,gift_num:o,award_name:i,uid:a,uname:s,require_type:c,require_text:u}=t;Hi.info(`å¤©éä¸»æ­ï¼ã${s}ã`),Hi.info(`å¥åï¼${i}`);const{code:f,message:l}=await(e={id:n,gift_id:r,gift_num:o},ms.post("/xlive/lottery-interface/v1/Anchor/Join",{...e,csrf:sa.BILIJCT,csrf_token:sa.BILIJCT,visit_id:Oo(),platform:"pc"}));if(0!==f)return void Hi.info(`å¤©éå¤±è´¥: ${f}-${l}`);if(Hi.info("å¤©éæå â"),c===hc){Io(bc,a);(function(t){const e=(t=t.replace("å³æ³¨ä¸»æ­","")).split(/\s*\+\s*/);return e.shift(),e})(u).forEach((t=>Io(bc,t)))}}catch(t){Hi.info(`å¤©éå¼å¸¸: ${t.message}`)}var e}async function Ec(t,e,n=2){for(let r=1;r<=n;r++){const n=await Oc(t,e,r);for(const t of n)await Sc(t),await da(300)}}var Cc={taskReward:async function(){Hi.info("----ãæ¯æ¥ä»»å¡å®ææåµã----");try{const{data:t,message:e,code:n}=await hs.get("/x/member/web/exp/reward");await da();const{data:r}=await $s();if(0!=n)return void Hi.warn(`ç¶æè·åå¤±è´¥: ${n} ${e}`);const o=ca.money-sa.BILI_STAY_COINS;let i=0;0===ca.coinsTask?Hi.info(`ä»æ¥æå¸è·åç»éª: ${r}ï¼è¿éæå¸0é¢ï¼ç»éªå¤äºï¼ä¸æ³æäº`):o<=0?Hi.info(`ä»æ¥æå¸è·åç»éª: ${r}ï¼è¿éæå¸0é¢ï¼ç¡¬å¸ä¸å¤äºï¼ä¸æå¸äº`):o<ca.coinsTask?(i=ca.coinsTask-o,Hi.info(`æå¸è·åç»éª: ${r}ï¼è¿éæå¸æ°é: ${i}é¢;(ç®æ ${ca.coinsTask}é¢ï¼å¿½ç¥é¨åæå¸)`)):(i=ca.coinsTask-r/10,Hi.info(`æå¸è·åç»éª: ${r}ï¼è¿éæå¸æ°é: ${i}é¢;(ç®æ ${ca.coinsTask}é¢)`)),ca.coinsTask=i,Hi.info("æ¯æ¥åäº«: "+(t.share?"å·²å®æ":"[æªå®æ]")),Hi.info("æ¯æ¥æ­æ¾: "+(t.watch?"å·²å®æ":"[æªå®æ]")),ca.share=t.share,ca.watch=t.watch}catch(t){Hi.error(`ç¶æè·åå¼å¸¸ ${t.message}`)}},liveSignTask:async function(){Hi.info("----ãç´æ­ç­¾å°ã----");try{const{data:t}=await ms.get("/xlive/web-ucenter/v1/sign/WebGetSignInfo");if(1===t.status)return Hi.info("å·²ç­¾å°ï¼è·³è¿ç­¾å°"),void Hi.info(`å·²ç»ç­¾å°${t.hadSignDays}å¤©ï¼${t.specialText}`)}catch(t){}try{const{code:t,data:e,message:n}=await ms.get("/xlive/web-ucenter/v1/sign/DoSign");0===t?Hi.info(`ç´æ­ç­¾å°æå: ${e.text}ï¼ç¹å«ä¿¡æ¯: ${e.specialText}ï¼æ¬æç­¾å°å¤©æ°: ${e.hadSignDays}å¤©;`):Hi.warn(`ç´æ­ç­¾å°å¤±è´¥: ${t} ${n}`)}catch(t){Hi.error(`ç´æ­ç­¾å°å¼å¸¸: ${t.message}`)}},shareAndWatch:async function(){if(Hi.info("----ãåäº«/æ­æ¾è§é¢ã----"),ca.share&&ca.watch)return void Hi.info("å·²å®æï¼è·³è¿åäº«/æ­æ¾");let t=0;try{let e=await Ms();if("-1"===e.msg&&(e=await Us()),"0"!==e.msg)return Hi.warn(`è·åè§é¢å¤±è´¥ ${e.msg}`),!1;{const{id:n,author:r,title:o}=e.data;t=n,Hi.info(`è·åè§é¢: ${o} --upã${r}ã`)}}catch(t){return Hi.error(`è·åè§é¢åºç°å¼å¸¸: ${t.message}`),!1}if(!ca.share){await da();try{const{code:e,message:n}=await function(t){const e={csrf:sa.BILIJCT,aid:t};return hs.post("/x/web-interface/share/add",e)}(t);0===e?Hi.info("åäº«è§é¢æå!"):Hi.warn(`åäº«è§é¢å¤±è´¥: ${e} ${n}`)}catch(t){Hi.error(`åäº«è§é¢å¼å¸¸: ${t.message}`)}}if(!ca.watch){await da();try{const{code:r,message:o}=await(e=t,n=$o(4,60),hs.post("/x/click-interface/web/heartbeat",{aid:e,played_time:n}));0===r?Hi.info("æ­æ¾è§é¢æå!"):Hi.warn(`æ­æ¾è§é¢å¤±è´¥: ${r} ${o}`)}catch(t){Hi.error(`æ­æ¾è§é¢å¼å¸¸: ${t.message}`)}}var e,n},silver2Coin:async function(){Hi.info("----ãé¶çå­åæ¢ç¡¬å¸ã----");try{const{data:t,code:e,message:n}=await ms.get("/xlive/revenue/v1/wallet/getStatus");if(0!=e&&Hi.info(`è·åçå­è¯¦æå¤±è´¥ ${n}`),0===t.silver_2_coin_left)Hi.info("ä»æ¥å·²åæ¢ä¸æ¬¡");else if(t.silver<700)Hi.info("åæ¢å¤±è´¥ï¼ä½ çå­ä¸å¤äº");else{const{message:t}=await ms.post("/xlive/revenue/v1/wallet/silver2coin",{csrf_token:sa.BILIJCT,csrf:sa.BILIJCT});Hi.info(`åæ¢ç¡¬å¸ï¼ ${t}`),await ms.get("/xlive/revenue/v1/wallet/myWallet?need_bp=1&need_metal=1&platform=pc")}}catch(t){Hi.error(`æä½å¼å¸¸ ${t.message}`)}},addCoins:async function(){if(Hi.info("----ãè§é¢æå¸ã----"),!ca.coinsTask)return void Hi.info("è·³è¿æå¸ï¼ä»æ¥å·²å®æ");const t={eCount:0,num:0,prevCode:0,fillCount:0,priority:0};let e=!1;for(;ca.coinsTask&&!e&&t.eCount<5;)e=await Hs(t);t.eCount>=5&&Hi.info("åºç°å¼å¸¸/éè¯¯5æ¬¡ï¼èªå¨éåºæå¸"),Hi.info(`ä¸å±æåæå¸${t.num}é¢`),Hi.info(`ç¡¬å¸è¿å©${ca.money}é¢`)},mangaSign:async function(){Hi.info("----ãæ¼«ç»ç­¾å°ã----");try{const{code:t}=await ys.post("/twirp/activity.v1.Activity/ClockIn",{platform:e});0==t?Hi.info("æ¼«ç»ç­¾å°æå"):Hi.warn("æ¼«ç»ç­¾å°å¤±è´¥")}catch(e){var t;400===(null===(t=e.response)||void 0===t?void 0:t.status)?Hi.info("å·²ç»ç­¾å°è¿äºï¼è·³è¿ä»»å¡"):Hi.error(`æ¼«ç»ç­¾å°å¼å¸¸ ${e.message}`)}var e},supGroupSign:async function(){Hi.info("----ãåºæ´å¢ç­¾å°ã----");const t=await Ks();await da();let e=0;for(let o=0;o<t.length;){const i=t[o];try{const{data:t,code:o,message:a}=await(n=i.group_id,r=i.owner_uid,vs.get("/link_setting/v1/link_setting/sign_in",{params:{group_id:n,owner_id:r}}));0===o?0===t.status?e++:Hi.info(a):Hi.warn(`[${i.group_name}]ç­¾å°å¤±è´¥ ${a}`)}catch(t){Hi.error(`ç­¾å°å¼å¸¸ ${t.message}`)}finally{await da()}}var n,r;Hi.info(`ç­¾å°ç»æï¼æå${e}/${t.length}`)},liveSendMessage:async function(){Hi.info("----ãåéç´æ­å¼¹å¹ã----");const t=await async function(){const{list:t,special_list:e}=await Fs();return t.push(...e),t}(),e=t.length;let n=0,r=0;Hi.info(`ä¸å±éè¦åé${e}ä¸ªç´æ­é´`),Hi.verbose("æéæ¶é´å¯è½å¾é¿ï¼è¯·èå¿ç­å¾");for(let o=0;o<e;o++){const{room_info:i,anchor_info:a,medal:s}=t[o];null!=i&&i.room_id?100===s.today_feed||s.guard_level>0?r++:(await Js(i.room_id,a.nick_name)&&n++,o<e-1&&await da($o(1e4,25e3))):(Hi.info(`ã${a.nick_name}ãæ²¡æç´æ­é´å¦`),r++)}Hi.info(`æååé${n}ä¸ªå¼¹å¹ï¼è·³è¿${r}ä¸ª`)},charging:async function(){if(Hi.info("----ãç»ç®æ åçµã----"),await Qs(),await da(),function(){const t=bo(),e=t.getDate(),n=wo(t),r=sa.CHARGE_PRESET_TIME;return ca.bCoinCouponBalance<2?(Hi.info(`å©ä½å¸ä¸º${ca.bCoinCouponBalance}ï¼ä¸è¶³2è·³è¿åçµ`),!1):n===e?(Hi.info("ä»å¤©æ¯æåä¸å¤©äº"),!0):!(r>e&&(Hi.info(`é¢è®¾æ¶é´ä¸º${r}ï¼ä¸ç¬¦åæ¡ä»¶`),1))}())try{const t=ca.bCoinCouponBalance||0,e=sa.CHARGE_ID;let n=0;Hi.info(`b å¸å¸ä½é¢${t}`);const r=async()=>{const{code:n,message:r,data:o}=await function(t,e,n=sa.USERID,r,o){return hs.post("/x/ugcpay/web/v2/trade/elec/pay/quick",{csrf:sa.BILIJCT,bp_num:t,is_bp_remains_prior:e,up_mid:n,otype:r,oid:o})}(t,!0,e);0===n?(Hi.info(`ãåå¼ç»æã${Ws[o.status]}`),o.status===Ws["æå"]&&(ca.chargeOrderNo=o.order_no,await da(),await async function(){try{if(!ca.chargeOrderNo)return!1;const t=fo[$o(0,fo.length-1)],{code:e}=await function(t,e){return hs.post("/x/ugcpay/trade/elec/message",{csrf:sa.BILIJCT,message:e,order_id:t})}(ca.chargeOrderNo,t);0===e&&Hi.info("çè¨æåï¼")}catch{}}())):Hi.warn(`åçµå¤±è´¥ï¼${n} ${r}`)};for(ca.chargeOrderNo="";!(ca.chargeOrderNo||(await r(),await da(),n++>2)););}catch(t){Hi.error(`åçµåºç°å¼å¸¸ï¼${t.message}`)}},getVipPrivilege:async function(){Hi.info("----ãé¢åå¤§ä¼åæçã----"),function(){if(2!==ca.vipType)return Hi.info("è´¦å·éå¹´åº¦å¤§ä¼åï¼ä¸éè¦é¢åæç"),!1;const t=bo(),e=t.getDate(),n=wo(t);return 1===e||n===e||(Hi.info("ä»å¤©éé¢è®¢é¢åæ¶é´ï¼è·³è¿é¢å"),!1)}()&&(await Xs(1),await Xs(2))},giveGift:async function(){Hi.info("----ãæåè¿æé£ç©ã----");try{const t=await Zs();if(await da(),null==t||!t.length)return void Hi.info("æ²¡æ2å¤©åè¿æçç®åç¤¼ç©");const e=await async function(){const t=Object.assign([],sa.BILI_GIFT_UP),e=()=>t.splice($o(sa.BILI_GIFT_UP.length-1),1)[0];for(;t.length;){const t=e(),n=await tc(t);if(n)return{mid:t,...n}}return await async function(){const{data:{count:t,items:e}}=await ws();if(await da(),!t)return;const n=e[$o(e.length-1)];return{mid:n.target_id,roomid:n.roomid||0,name:n.uname}}()}();if(!e)return void Hi.info("æ²¡ææ¾å°æåç®æ ");await async function({roomid:t,mid:e,name:n},r){for(const o of r){await da();try{const{code:r,message:i,data:a}=await bs({roomid:t,ruid:e,bag_id:o.bag_id,gift_id:o.gift_id,gift_num:o.gift_num});if(0!==r){Hi.warn(`å[${n}]æå[${o.gift_name}]ï¼${i}`);continue}a.gift_list.forEach((t=>{Hi.info(`æåç» [${n}] æå${t.gift_name}`)}))}catch{}}}(e,t)}catch(t){Hi.info(`æåè¿æé£ç©å¼å¸¸ ${t}`)}},matchGame:async function(){if(Hi.info("----ãèµäºç¡¬å¸ç«çã----"),sa.MATCH_COINS<=0)return void Hi.info("ç¡¬å¸æ°éä¸è½å°äº 0");if(nc())return;const t=await async function(){try{const{code:n,message:r,data:{list:o,page:i}}=await hs.get(`/x/esports/guess/collection/question?pn=1&ps=50&gid=&sids=&stime=${t}&etime=${e}`);return 0!==n?void Hi.warn(`è·åèµäºéè¯¯ ${n} ${r}`):0===i.total?(Hi.info("ä»æ¥å·²ç»æ æ³è·åèµäº"),null):o}catch(t){}var t,e}();if(await da(),!t)return;const e=await async function(t){let e=0;try{for(const n of t){const{contest:t,questions:r}=n,o=t.id,[{id:i,title:a,details:s,is_guess:c}]=r,[u,f]=s;if(nc())return e;if(c)continue;Hi.info(`${a} <=> ${u.odds}:${f.odds}`);const l=u.odds>f.odds;let p;p=sa.MATCH_SELECTION>0?l?f:u:l?u:f,Hi.info(`é¢æµ[ ${p.option} ] ${sa.MATCH_COINS} é¢ç¡¬å¸`),await da();const{code:d}=await ec(o,i,p.detail_id,sa.MATCH_COINS);0!==d?Hi.info("é¢æµå¤±è´¥"):(e++,ca.money-=sa.MATCH_COINS)}}catch(t){console.warn(t.message)}return e}(function(t,e){return t.filter((t=>{const{questions:n}=t,[{details:r,is_guess:o}]=n;if(o)return!1;const[i,a]=r;return Math.abs(i.odds-a.odds)>=e}))}(t,sa.MATCH_DIFF));Hi.info(`ãç«çç»æãä¸å±åä¸${e}æ¬¡é¢æµ`)},liveHeart:async function(){Hi.info("----ãç´æ­å¿è·³ã----");const{heartNum:t,fansMedalList:e}=await uc(),n=e&&e.length;if(!n)return void Hi.info("æ²¡æåç« åè¡¨");const r=Math.ceil(t/n);for(let n=0;n<r;n++)await lc(e,t);Hi.info("å®æ")},liveLottery:async function(){Hi.info("----ãå¤©éæ¶å»ã----");try{const t=await async function(){const{data:t,code:e}=await Os(1,1,0);if(0!==e)throw new Error(`è·åæåä¸ä¸ªå³æ³¨å¤±è´¥: ${e}`);return t[0]}();Hi.info(`æåä¸ä¸ªå³æ³¨çUP: ${t.uname}`);const e=await async function(){bc=[];const t=await Tc();for(const e of t)for(const t of e)await Ec(t.areaId,t.parentId,sa.LOTTERY_PAGE_NUM);return bc}();Hi.info("æ«æå®æ");const n=[];await gc(n,e,null==t?void 0:t.mid),await async function(t,e){if(0===t.length)return;const n=await dc(e);if(n)for(const e of t){const{code:t,message:r}=await Is(e.mid,n);0!==t&&Hi.warn(`ç§»å¨ã${e.uname}ãå¤±è´¥: ${t}-${r}`),await da()}}(n),Hi.info("ç§»å¨å³æ³¨UPå°åç»æå")}catch(t){Hi.warn(`å¤©éæ¶å»å¼å¸¸: ${t.message}`),Hi.debug(t)}Hi.info("ç»æå¤©éæ¶å»")}};var Pc=!w((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),xc=v,Ac=Qt,Rc=tt,Lc=Yt,Uc=Pc,kc=$n("IE_PROTO"),jc=xc.Object,Nc=jc.prototype,Bc=Uc?jc.getPrototypeOf:function(t){var e=Lc(t);if(Ac(e,kc))return e[kc];var n=e.constructor;return Rc(n)&&e instanceof n?n.prototype:e instanceof jc?Nc:null},Gc={},Dc=Sr,Mc=Er,qc=Object.keys||function(t){return Dc(t,Mc)},Hc=b,Kc=Be,Yc=Ne,Fc=He,Jc=Z,Qc=qc;Gc.f=Hc&&!Kc?Object.defineProperties:function(t,e){Fc(t);for(var n,r=Jc(e),o=Qc(e),i=o.length,a=0;i>a;)Yc.f(t,n=o[a++],r[n]);return t};var Wc,zc=at("document","documentElement"),Xc=He,Vc=Gc,Zc=Er,tu=On,eu=zc,nu=Ie,ru=$n("IE_PROTO"),ou=function(){},iu=function(t){return"<script>"+t+"<\/script>"},au=function(t){t.write(iu("")),t.close();var e=t.parentWindow.Object;return t=null,e},su=function(){try{Wc=new ActiveXObject("htmlfile")}catch(t){}var t,e;su="undefined"!=typeof document?document.domain&&Wc?au(Wc):((e=nu("iframe")).style.display="none",eu.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(iu("document.F=Object")),t.close(),t.F):au(Wc);for(var n=Zc.length;n--;)delete su.prototype[Zc[n]];return su()};tu[ru]=!0;var cu=Object.create||function(t,e){var n;return null!==t?(ou.prototype=Xc(t),n=new ou,ou.prototype=null,n[ru]=t):n=su(),void 0===e?n:Vc.f(n,e)},uu=Pt,fu=T,lu=B(B.bind),pu={},du=pu,gu=fe("iterator"),mu=Array.prototype,hu=ai,yu=At,vu=pu,_u=fe("iterator"),wu=function(t){if(null!=t)return yu(t,_u)||yu(t,"@@iterator")||vu[hu(t)]},bu=I,Tu=Pt,$u=He,Ou=It,Iu=wu,Su=v.TypeError,Eu=I,Cu=He,Pu=At,xu=function(t,e){return uu(t),void 0===e?t:fu?lu(t,e):function(){return t.apply(e,arguments)}},Au=I,Ru=He,Lu=It,Uu=function(t){return void 0!==t&&(du.Array===t||mu[gu]===t)},ku=mr,ju=st,Nu=function(t,e){var n=arguments.length<2?Iu(t):e;if(Tu(n))return $u(bu(n,t));throw Su(Ou(t)+" is not iterable")},Bu=wu,Gu=function(t,e,n){var r,o;Cu(t);try{if(!(r=Pu(t,"return"))){if("throw"===e)throw n;return n}r=Eu(r,t)}catch(t){o=!0,r=t}if("throw"===e)throw n;if(o)throw r;return Cu(r),n},Du=v.TypeError,Mu=function(t,e){this.stopped=t,this.result=e},qu=Mu.prototype,Hu=function(t,e,n){var r,o,i,a,s,c,u,f=n&&n.that,l=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_ITERATOR),d=!(!n||!n.INTERRUPTED),g=xu(e,f),m=function(t){return r&&Gu(r,"normal",t),new Mu(!0,t)},h=function(t){return l?(Ru(t),d?g(t[0],t[1],m):g(t[0],t[1])):d?g(t,m):g(t)};if(p)r=t;else{if(!(o=Bu(t)))throw Du(Lu(t)+" is not iterable");if(Uu(o)){for(i=0,a=ku(t);a>i;i++)if((s=h(t[i]))&&ju(qu,s))return s;return new Mu(!1)}r=Nu(t,o)}for(c=r.next;!(u=Au(c,r)).done;){try{s=h(u.value)}catch(t){Gu(r,"throw",t)}if("object"==typeof s&&s&&ju(qu,s))return s}return new Mu(!1)},Ku=oo,Yu=v,Fu=st,Ju=Bc,Qu=Jo,Wu=Mr,zu=cu,Xu=tn,Vu=R,Zu=_i,tf=di,ef=Hu,nf=fi,rf=bi,of=fe("toStringTag"),af=Yu.Error,sf=[].push,cf=function(t,e){var n,r=arguments.length>2?arguments[2]:void 0,o=Fu(uf,this);Qu?n=Qu(new af,o?Ju(this):uf):(n=o?this:zu(uf),Xu(n,of,"Error")),void 0!==e&&Xu(n,"message",nf(e)),rf&&Xu(n,"stack",Zu(n.stack,1)),tf(n,r);var i=[];return ef(t,sf,{that:i}),Xu(n,"errors",i),n};Qu?Qu(cf,af):Wu(cf,af,{name:!0});var uf=cf.prototype=zu(af.prototype,{constructor:Vu(1,cf),message:Vu(1,""),name:Vu(1,"AggregateError")});Ku({global:!0,constructor:!0,arity:2},{AggregateError:cf});var ff={},lf=Pt,pf=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=lf(e),this.reject=lf(n)};ff.f=function(t){return new pf(t)};var df=I,gf=Pt,mf=at,hf=ff,yf=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},vf=Hu;oo({target:"Promise",stat:!0},{any:function(t){var e=this,n=mf("AggregateError"),r=hf.f(e),o=r.resolve,i=r.reject,a=yf((function(){var r=gf(e.resolve),a=[],s=0,c=1,u=!1;vf(t,(function(t){var f=s++,l=!1;c++,df(r,e,t).then((function(t){l||u||(u=!0,o(t))}),(function(t){l||u||(l=!0,a[f]=t,--c||i(new n(a,"No one promise resolved")))}))})),--c||i(new n(a,"No one promise resolved"))}));return a.error&&i(a.value),r.promise}}),Hi.info("å¼å§æ§è¡ç½ç»ä»£ç "),Hi.info("å½åçæ¬ãv0.4.13ã"),async function(t,...e){qi.value="";try{await async function(){Hi.info("----ãç»å½ã----");const{data:t,message:e,code:n}=await Ts();if(0!==n)throw Hi.error(`ç»å½éè¯¯ ${n} ${e}`),new Error(e);if(!t.isLogin)throw new Error("æ¥å£è¿åä¸ºæªç»å½");await da(),await Es(t)}()}catch(t){return Hi.error(`ç»å½å¤±è´¥: ${t}`),await ds("ç»å½å¤±è´¥",qi.value),"æªå®æ"}const n=pa([...Object.values(Cc)]);for(const t of n)await t(),await da();return t&&await t(...e),await ds("æ¯æ¥å®æ",qi.value),"å®æ"}().then((t=>{VMThis.message=t,VMThis.resolve(t)})).catch((t=>{VMThis.error=t,VMThis.reject(t)}));
