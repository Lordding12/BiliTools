"use strict";var u=require("path"),e=require("fs"),t=require("zlib"),n=require("nodemailer"),r=require("tunnel"),i=require("axios"),o=require("crypto");function a(u){return u&&"object"==typeof u&&"default"in u?u:{default:u}}function s(u){if(u&&u.__esModule)return u;var e=Object.create(null);return u&&Object.keys(u).forEach((function(t){if("default"!==t){var n=Object.getOwnPropertyDescriptor(u,t);Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:function(){return u[t]}})}})),e.default=u,Object.freeze(e)}var c,D=s(u),f=s(e),l=s(n),C=s(r),d=a(i),p=s(o);!function(u){u[u.SUCCESS=0]="SUCCESS",u[u["应用程序不存在或已被封禁"]=-1]="应用程序不存在或已被封禁",u[u["Access Key错误"]=-2]="Access Key错误",u[u["API校验密匙错误"]=-3]="API校验密匙错误",u[u["调用方对该Method没有权限"]=-4]="调用方对该Method没有权限",u[u["账号未登录"]=-101]="账号未登录",u[u["账号被封停"]=-102]="账号被封停",u[u["积分不足"]=-103]="积分不足",u[u["硬币不足"]=-104]="硬币不足",u[u["验证码错误"]=-105]="验证码错误",u[u["账号非正式会员或在适应期"]=-106]="账号非正式会员或在适应期",u[u["应用不存在或者被封禁"]=-107]="应用不存在或者被封禁",u[u["未绑定手机?"]=-108]="未绑定手机?",u[u["未绑定手机"]=-110]="未绑定手机",u[u["csrf 校验失败"]=-111]="csrf 校验失败",u[u["系统升级中"]=-112]="系统升级中",u[u["账号尚未实名认证"]=-113]="账号尚未实名认证",u[u["请先绑定手机"]=-114]="请先绑定手机",u[u["请先完成实名认证"]=-115]="请先完成实名认证"}(c||(c={}));const A="GET";var E="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},F=function(u){return u&&u.Math==Math&&u},g=F("object"==typeof globalThis&&globalThis)||F("object"==typeof window&&window)||F("object"==typeof self&&self)||F("object"==typeof E&&E)||function(){return this}()||Function("return this")(),m={},h=function(u){try{return!!u()}catch(u){return!0}},B=!h((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),y=!h((function(){var u=function(){}.bind();return"function"!=typeof u||u.hasOwnProperty("prototype")})),v=y,w=Function.prototype.call,_=v?w.bind(w):function(){return w.apply(w,arguments)},b={},$={}.propertyIsEnumerable,T=Object.getOwnPropertyDescriptor,S=T&&!$.call({1:2},1);b.f=S?function(u){var e=T(this,u);return!!e&&e.enumerable}:$;var O,I,x=function(u,e){return{enumerable:!(1&u),configurable:!(2&u),writable:!(4&u),value:e}},P=y,N=Function.prototype,L=N.bind,k=N.call,R=P&&L.bind(k,k),U=P?function(u){return u&&R(u)}:function(u){return u&&function(){return k.apply(u,arguments)}},j=U,G=j({}.toString),M=j("".slice),H=function(u){return M(G(u),8,-1)},q=U,K=h,J=H,Y=g.Object,z=q("".split),Q=K((function(){return!Y("z").propertyIsEnumerable(0)}))?function(u){return"String"==J(u)?z(u,""):Y(u)}:Y,W=g.TypeError,V=function(u){if(null==u)throw W("Can't call method on "+u);return u},X=Q,Z=V,uu=function(u){return X(Z(u))},eu=function(u){return"function"==typeof u},tu=eu,nu=function(u){return"object"==typeof u?null!==u:tu(u)},ru=g,iu=eu,ou=function(u){return iu(u)?u:void 0},au=function(u,e){return arguments.length<2?ou(ru[u]):ru[u]&&ru[u][e]},su=U({}.isPrototypeOf),cu=g,Du=au("navigator","userAgent")||"",fu=cu.process,lu=cu.Deno,Cu=fu&&fu.versions||lu&&lu.version,du=Cu&&Cu.v8;du&&(I=(O=du.split("."))[0]>0&&O[0]<4?1:+(O[0]+O[1])),!I&&Du&&(!(O=Du.match(/Edge\/(\d+)/))||O[1]>=74)&&(O=Du.match(/Chrome\/(\d+)/))&&(I=+O[1]);var pu=I,Au=h,Eu=!!Object.getOwnPropertySymbols&&!Au((function(){var u=Symbol();return!String(u)||!(Object(u)instanceof Symbol)||!Symbol.sham&&pu&&pu<41})),Fu=Eu&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,gu=au,mu=eu,hu=su,Bu=Fu,yu=g.Object,vu=Bu?function(u){return"symbol"==typeof u}:function(u){var e=gu("Symbol");return mu(e)&&hu(e.prototype,yu(u))},wu=g.String,_u=eu,bu=function(u){try{return wu(u)}catch(u){return"Object"}},$u=g.TypeError,Tu=function(u){if(_u(u))return u;throw $u(bu(u)+" is not a function")},Su=_,Ou=eu,Iu=nu,xu=g.TypeError,Pu={exports:{}},Nu=g,Lu=Object.defineProperty,ku=function(u,e){try{Lu(Nu,u,{value:e,configurable:!0,writable:!0})}catch(t){Nu[u]=e}return e},Ru=ku,Uu=g["__core-js_shared__"]||Ru("__core-js_shared__",{}),ju=Uu;(Pu.exports=function(u,e){return ju[u]||(ju[u]=void 0!==e?e:{})})("versions",[]).push({version:"3.22.7",mode:"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.22.7/LICENSE",source:"https://github.com/zloirock/core-js"});var Gu=V,Mu=g.Object,Hu=function(u){return Mu(Gu(u))},qu=U({}.hasOwnProperty),Ku=Object.hasOwn||function(u,e){return qu(Hu(u),e)},Ju=U,Yu=0,zu=Math.random(),Qu=Ju(1..toString),Wu=function(u){return"Symbol("+(void 0===u?"":u)+")_"+Qu(++Yu+zu,36)},Vu=g,Xu=Pu.exports,Zu=Ku,ue=Wu,ee=Eu,te=Fu,ne=Xu("wks"),re=Vu.Symbol,ie=re&&re.for,oe=te?re:re&&re.withoutSetter||ue,ae=function(u){if(!Zu(ne,u)||!ee&&"string"!=typeof ne[u]){var e="Symbol."+u;ee&&Zu(re,u)?ne[u]=re[u]:ne[u]=te&&ie?ie(e):oe(e)}return ne[u]},se=_,ce=nu,De=vu,fe=function(u,e){var t=u[e];return null==t?void 0:Tu(t)},le=function(u,e){var t,n;if("string"===e&&Ou(t=u.toString)&&!Iu(n=Su(t,u)))return n;if(Ou(t=u.valueOf)&&!Iu(n=Su(t,u)))return n;if("string"!==e&&Ou(t=u.toString)&&!Iu(n=Su(t,u)))return n;throw xu("Can't convert object to primitive value")},Ce=ae,de=g.TypeError,pe=Ce("toPrimitive"),Ae=function(u,e){if(!ce(u)||De(u))return u;var t,n=fe(u,pe);if(n){if(void 0===e&&(e="default"),t=se(n,u,e),!ce(t)||De(t))return t;throw de("Can't convert object to primitive value")}return void 0===e&&(e="number"),le(u,e)},Ee=vu,Fe=function(u){var e=Ae(u,"string");return Ee(e)?e:e+""},ge=nu,me=g.document,he=ge(me)&&ge(me.createElement),Be=function(u){return he?me.createElement(u):{}},ye=!B&&!h((function(){return 7!=Object.defineProperty(Be("div"),"a",{get:function(){return 7}}).a})),ve=B,we=_,_e=b,be=x,$e=uu,Te=Fe,Se=Ku,Oe=ye,Ie=Object.getOwnPropertyDescriptor;m.f=ve?Ie:function(u,e){if(u=$e(u),e=Te(e),Oe)try{return Ie(u,e)}catch(u){}if(Se(u,e))return be(!we(_e.f,u,e),u[e])};var xe={},Pe=B&&h((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Ne=g,Le=nu,ke=Ne.String,Re=Ne.TypeError,Ue=function(u){if(Le(u))return u;throw Re(ke(u)+" is not an object")},je=B,Ge=ye,Me=Pe,He=Ue,qe=Fe,Ke=g.TypeError,Je=Object.defineProperty,Ye=Object.getOwnPropertyDescriptor;xe.f=je?Me?function(u,e,t){if(He(u),e=qe(e),He(t),"function"==typeof u&&"prototype"===e&&"value"in t&&"writable"in t&&!t.writable){var n=Ye(u,e);n&&n.writable&&(u[e]=t.value,t={configurable:"configurable"in t?t.configurable:n.configurable,enumerable:"enumerable"in t?t.enumerable:n.enumerable,writable:!1})}return Je(u,e,t)}:Je:function(u,e,t){if(He(u),e=qe(e),He(t),Ge)try{return Je(u,e,t)}catch(u){}if("get"in t||"set"in t)throw Ke("Accessors not supported");return"value"in t&&(u[e]=t.value),u};var ze=xe,Qe=x,We=B?function(u,e,t){return ze.f(u,e,Qe(1,t))}:function(u,e,t){return u[e]=t,u},Ve={exports:{}},Xe=B,Ze=Ku,ut=Function.prototype,et=Xe&&Object.getOwnPropertyDescriptor,tt=Ze(ut,"name"),nt={EXISTS:tt,PROPER:tt&&"something"===function(){}.name,CONFIGURABLE:tt&&(!Xe||Xe&&et(ut,"name").configurable)},rt=eu,it=Uu,ot=U(Function.toString);rt(it.inspectSource)||(it.inspectSource=function(u){return ot(u)});var at,st,ct,Dt=it.inspectSource,ft=eu,lt=Dt,Ct=g.WeakMap,dt=ft(Ct)&&/native code/.test(lt(Ct)),pt=Pu.exports,At=Wu,Et=pt("keys"),Ft={},gt=dt,mt=g,ht=U,Bt=nu,yt=We,vt=Ku,wt=Uu,_t=function(u){return Et[u]||(Et[u]=At(u))},bt=Ft,$t=mt.TypeError,Tt=mt.WeakMap;if(gt||wt.state){var St=wt.state||(wt.state=new Tt),Ot=ht(St.get),It=ht(St.has),xt=ht(St.set);at=function(u,e){if(It(St,u))throw new $t("Object already initialized");return e.facade=u,xt(St,u,e),e},st=function(u){return Ot(St,u)||{}},ct=function(u){return It(St,u)}}else{var Pt=_t("state");bt[Pt]=!0,at=function(u,e){if(vt(u,Pt))throw new $t("Object already initialized");return e.facade=u,yt(u,Pt,e),e},st=function(u){return vt(u,Pt)?u[Pt]:{}},ct=function(u){return vt(u,Pt)}}var Nt={set:at,get:st,has:ct,enforce:function(u){return ct(u)?st(u):at(u,{})},getterFor:function(u){return function(e){var t;if(!Bt(e)||(t=st(e)).type!==u)throw $t("Incompatible receiver, "+u+" required");return t}}},Lt=h,kt=eu,Rt=Ku,Ut=B,jt=nt.CONFIGURABLE,Gt=Dt,Mt=Nt.enforce,Ht=Nt.get,qt=Object.defineProperty,Kt=Ut&&!Lt((function(){return 8!==qt((function(){}),"length",{value:8}).length})),Jt=String(String).split("String"),Yt=Ve.exports=function(u,e,t){"Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),t&&t.getter&&(e="get "+e),t&&t.setter&&(e="set "+e),(!Rt(u,"name")||jt&&u.name!==e)&&qt(u,"name",{value:e,configurable:!0}),Kt&&t&&Rt(t,"arity")&&u.length!==t.arity&&qt(u,"length",{value:t.arity});try{t&&Rt(t,"constructor")&&t.constructor?Ut&&qt(u,"prototype",{writable:!1}):u.prototype&&(u.prototype=void 0)}catch(u){}var n=Mt(u);return Rt(n,"source")||(n.source=Jt.join("string"==typeof e?e:"")),u};Function.prototype.toString=Yt((function(){return kt(this)&&Ht(this).source||Gt(this)}),"toString");var zt=eu,Qt=We,Wt=Ve.exports,Vt=ku,Xt={},Zt=Math.ceil,un=Math.floor,en=Math.trunc||function(u){var e=+u;return(e>0?un:Zt)(e)},tn=function(u){var e=+u;return e!=e||0===e?0:en(e)},nn=tn,rn=Math.max,on=Math.min,an=tn,sn=Math.min,cn=function(u){return u>0?sn(an(u),9007199254740991):0},Dn=uu,fn=function(u,e){var t=nn(u);return t<0?rn(t+e,0):on(t,e)},ln=function(u){return cn(u.length)},Cn=function(u){return function(e,t,n){var r,i=Dn(e),o=ln(i),a=fn(n,o);if(u&&t!=t){for(;o>a;)if((r=i[a++])!=r)return!0}else for(;o>a;a++)if((u||a in i)&&i[a]===t)return u||a||0;return!u&&-1}},dn={includes:Cn(!0),indexOf:Cn(!1)},pn=Ku,An=uu,En=dn.indexOf,Fn=Ft,gn=U([].push),mn=function(u,e){var t,n=An(u),r=0,i=[];for(t in n)!pn(Fn,t)&&pn(n,t)&&gn(i,t);for(;e.length>r;)pn(n,t=e[r++])&&(~En(i,t)||gn(i,t));return i},hn=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"].concat("length","prototype");Xt.f=Object.getOwnPropertyNames||function(u){return mn(u,hn)};var Bn={};Bn.f=Object.getOwnPropertySymbols;var yn=au,vn=Xt,wn=Bn,_n=Ue,bn=U([].concat),$n=yn("Reflect","ownKeys")||function(u){var e=vn.f(_n(u)),t=wn.f;return t?bn(e,t(u)):e},Tn=Ku,Sn=$n,On=m,In=xe,xn=function(u,e,t){for(var n=Sn(e),r=In.f,i=On.f,o=0;o<n.length;o++){var a=n[o];Tn(u,a)||t&&Tn(t,a)||r(u,a,i(e,a))}},Pn=h,Nn=eu,Ln=/#|\.prototype\./,kn=function(u,e){var t=Un[Rn(u)];return t==Gn||t!=jn&&(Nn(e)?Pn(e):!!e)},Rn=kn.normalize=function(u){return String(u).replace(Ln,".").toLowerCase()},Un=kn.data={},jn=kn.NATIVE="N",Gn=kn.POLYFILL="P",Mn=kn,Hn=g,qn=m.f,Kn=We,Jn=function(u,e,t,n){n||(n={});var r=n.enumerable,i=void 0!==n.name?n.name:e;return zt(t)&&Wt(t,i,n),n.global?r?u[e]=t:Vt(e,t):(n.unsafe?u[e]&&(r=!0):delete u[e],r?u[e]=t:Qt(u,e,t)),u},Yn=ku,zn=xn,Qn=Mn,Wn=y,Vn=Function.prototype,Xn=Vn.apply,Zn=Vn.call,ur="object"==typeof Reflect&&Reflect.apply||(Wn?Zn.bind(Xn):function(){return Zn.apply(Xn,arguments)}),er=g,tr=eu,nr=er.String,rr=er.TypeError,ir=U,or=Ue,ar=function(u){if("object"==typeof u||tr(u))return u;throw rr("Can't set "+nr(u)+" as a prototype")},sr=Object.setPrototypeOf||("__proto__"in{}?function(){var u,e=!1,t={};try{(u=ir(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(t,[]),e=t instanceof Array}catch(u){}return function(t,n){return or(t),ar(n),e?u(t,n):t.__proto__=n,t}}():void 0),cr=xe.f,Dr=eu,fr=nu,lr=sr,Cr={};Cr[ae("toStringTag")]="z";var dr=g,pr="[object z]"===String(Cr),Ar=eu,Er=H,Fr=ae("toStringTag"),gr=dr.Object,mr="Arguments"==Er(function(){return arguments}()),hr=pr?Er:function(u){var e,t,n;return void 0===u?"Undefined":null===u?"Null":"string"==typeof(t=function(u,e){try{return u[e]}catch(u){}}(e=gr(u),Fr))?t:mr?Er(e):"Object"==(n=Er(e))&&Ar(e.callee)?"Arguments":n},Br=hr,yr=g.String,vr=function(u){if("Symbol"===Br(u))throw TypeError("Cannot convert a Symbol value to a string");return yr(u)},wr=nu,_r=We,br=Error,$r=U("".replace),Tr=String(br("zxcasd").stack),Sr=/\n\s*at [^:]*:[^\n]*/,Or=Sr.test(Tr),Ir=x,xr=!h((function(){var u=Error("a");return!("stack"in u)||(Object.defineProperty(u,"stack",Ir(1,7)),7!==u.stack)})),Pr=au,Nr=Ku,Lr=We,kr=su,Rr=sr,Ur=xn,jr=function(u,e,t){t in u||cr(u,t,{configurable:!0,get:function(){return e[t]},set:function(u){e[t]=u}})},Gr=function(u,e,t){var n,r;return lr&&Dr(n=e.constructor)&&n!==t&&fr(r=n.prototype)&&r!==t.prototype&&lr(u,r),u},Mr=function(u,e){return void 0===u?arguments.length<2?"":e:vr(u)},Hr=function(u,e){wr(e)&&"cause"in e&&_r(u,"cause",e.cause)},qr=function(u,e){if(Or&&"string"==typeof u&&!br.prepareStackTrace)for(;e--;)u=$r(u,Sr,"");return u},Kr=xr,Jr=B,Yr=function(u,e){var t,n,r,i,o,a=u.target,s=u.global,c=u.stat;if(t=s?Hn:c?Hn[a]||Yn(a,{}):(Hn[a]||{}).prototype)for(n in e){if(i=e[n],r=u.dontCallGetSet?(o=qn(t,n))&&o.value:t[n],!Qn(s?n:a+(c?".":"#")+n,u.forced)&&void 0!==r){if(typeof i==typeof r)continue;zn(i,r)}(u.sham||r&&r.sham)&&Kn(i,"sham",!0),Jn(t,n,i,u)}},zr=ur,Qr=function(u,e,t,n){var r="stackTraceLimit",i=n?2:1,o=u.split("."),a=o[o.length-1],s=Pr.apply(null,o);if(s){var c=s.prototype;if(Nr(c,"cause")&&delete c.cause,!t)return s;var D=Pr("Error"),f=e((function(u,e){var t=Mr(n?e:u,void 0),r=n?new s(u):new s;return void 0!==t&&Lr(r,"message",t),Kr&&Lr(r,"stack",qr(r.stack,2)),this&&kr(c,this)&&Gr(r,this,f),arguments.length>i&&Hr(r,arguments[i]),r}));f.prototype=c,"Error"!==a?Rr?Rr(f,D):Ur(f,D,{name:!0}):Jr&&r in s&&(jr(f,s,r),jr(f,s,"prepareStackTrace")),Ur(f,s);try{c.name!==a&&Lr(c,"name",a),c.constructor=f}catch(u){}return f}},Wr=g.WebAssembly,Vr=7!==Error("e",{cause:7}).cause,Xr=function(u,e){var t={};t[u]=Qr(u,e,Vr),Yr({global:!0,constructor:!0,arity:1,forced:Vr},t)},Zr=function(u,e){if(Wr&&Wr[u]){var t={};t[u]=Qr("WebAssembly."+u,e,Vr),Yr({target:"WebAssembly",stat:!0,constructor:!0,arity:1,forced:Vr},t)}};Xr("Error",(function(u){return function(e){return zr(u,this,arguments)}})),Xr("EvalError",(function(u){return function(e){return zr(u,this,arguments)}})),Xr("RangeError",(function(u){return function(e){return zr(u,this,arguments)}})),Xr("ReferenceError",(function(u){return function(e){return zr(u,this,arguments)}})),Xr("SyntaxError",(function(u){return function(e){return zr(u,this,arguments)}})),Xr("TypeError",(function(u){return function(e){return zr(u,this,arguments)}})),Xr("URIError",(function(u){return function(e){return zr(u,this,arguments)}})),Zr("CompileError",(function(u){return function(e){return zr(u,this,arguments)}})),Zr("LinkError",(function(u){return function(e){return zr(u,this,arguments)}})),Zr("RuntimeError",(function(u){return function(e){return zr(u,this,arguments)}}));const ui=Object.prototype.toString;function ei(u,e){return ui.call(u)===`[object ${e}]`}function ti(u){return null!==u&&ei(u,"Object")}function ni(u){return ei(u,"String")}function ri(u){return"function"==typeof u}const ii=new Map,oi=u=>[u.method,u.url].join("&");class ai{addPending(u){this.removePending(u);const e=oi(u);u.cancelToken||=new d.default.CancelToken((u=>{ii.has(e)||ii.set(e,u)}))}removeAllPending(){ii.forEach((u=>{u&&ri(u)&&u()})),ii.clear()}removePending(u){const e=oi(u);if(ii.has(e)){const u=ii.get(e);u&&ri(u)&&u(),ii.delete(e)}}reset(){ii.clear()}}const si=["棒","棒唉","棒耶","加油~","UP加油!","支持~","支持支持！","催更啦","顶顶","留下脚印~","干杯","bilibili干杯","o(*￣▽￣*)o","(｡･∀･)ﾉﾞ嗨","(●ˇ∀ˇ●)","( •̀ ω •́ )y","(ง •_•)ง",">.<","^_~"],ci=["舰","船","航海","代金券","优惠券","自拍","照","写真","图","提督","车车一局","再来一局","游戏道具"],Di=["谢"],fi=[65566781,1277481241,1643654862,603676925];function li(u){const e=u||Ci(),t=e.getFullYear(),n=e.getMonth()+1;return 2===n?t%4==0&&t%100!=0||t%400==0?29:28:[4,6,9,11].includes(n)?30:31}function Ci(){const u=new Date,e=u.getTime(),t=u.getTimezoneOffset()/60;return new Date(e+36e5*(t+8))}function di(u,e){return Math.ceil(e/u)}function pi(u,e,t){if(t&&"boolean"!=typeof t&&(e=t=void 0),void 0===t&&("boolean"==typeof e?(t=e,e=void 0):"boolean"==typeof u&&(t=u,u=void 0)),void 0===u&&void 0===e?(u=0,e=1):void 0===e&&(e=u,u=0),u>e){const t=u;u=e,e=t}if(t||u%1||e%1){const t=Math.random();return Math.min(u+t*(e-u+parseFloat("1e-"+((t+"").length-1))),e)}return u+Math.floor(Math.random()*(e-u+1))}function Ai(){return`${pi(1,9)}${function(u,e){let t="";for(let e=0;e<u;e++)t+=Bi("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ");return e?t.toLowerCase():t}(10,!0)}0`}function Ei(u,e){u.includes(e)||u.push(e)}function Fi(u){return u||{}}function gi(u,e=!1){return"object"!=typeof u?u:Array.isArray(u)?u.map((u=>gi(u,e))):e?Object.keys(u).reduce(((t,n)=>(t[n]=gi(u[n],e),t)),{}):Object.assign({},u)}function mi(u,e){return void 0===u||void 0===e?u||e:ti(u)&&ti(e)?Array.isArray(u)&&Array.isArray(e)?u.concat(e):Object.keys(e).reduce(((t,n)=>(t[n]=mi(u[n],e[n]),t)),u):e}function hi(u){const e=new URLSearchParams;return Object.keys(u).forEach((t=>{e.append(t,String(u[t]))})),e.toString()}function Bi(u){return u[pi(u.length-1)]}class yi{constructor(u){const{requestOptions:e}=u;!1===e.withCredentials&&(u.withCredentials=!1),this.options=u,this.axiosInstance=d.default.create(u),this.setupInterceptors()}createAxiosInstance(u){this.axiosInstance=d.default.create(u)}getTransform(){return this.options.transform}getAxios(){return this.axiosInstance}configAxios(u){this.axiosInstance&&this.createAxiosInstance(u)}setHeaders(u){this.axiosInstance&&Object.assign(this.axiosInstance.defaults.headers,this.options.headers,u)}setupInterceptors(){const u=this.getTransform();if(!u)return;const{requsetInterceptors:e,requestInterceptorsCatch:t,responseInterceptors:n,responseInterceptorsCatch:r}=u,i=new ai;this.axiosInstance.interceptors.request.use((u=>{var t;const{headers:{ignoreCancelToken:r}}=u;return!(r||(null===(t=this.options.requestOptions)||void 0===t?void 0:t.ignoreCancelToken))&&i.addPending(u),ri(n)&&(u=e(u,this.options)),u}),void 0),ri(t)&&this.axiosInstance.interceptors.request.use(void 0,t),this.axiosInstance.interceptors.response.use((u=>(u&&i.removePending(u.config),ri(n)&&(u=n(u)),u)),void 0),ri(r)&&this.axiosInstance.interceptors.response.use(void 0,r)}supportFormData(u){var e;const t={...this.options.headers,...u.headers};return((null==t?void 0:t["Content-Type"])||(null==t?void 0:t["content-type"])||"").includes("application/x-www-form-urlencoded")&&Reflect.has(u,"data")&&(null===(e=u.method)||void 0===e?void 0:e.toUpperCase())!==A&&!ni(u.data)?{...u,data:hi(u.data)}:u}get(u,e){return ni(u)?this.request({...e,method:"GET",url:u}):this.request({...u,method:"GET"})}post(u,e,t){return ni(u)?this.request({...t,method:"POST",url:u,data:e}):this.request({...u,method:"POST"})}put(u,e,t){return this.request({...t,method:"PUT",url:u,data:e})}delete(u,e,t){return this.request({...t,method:"DELETE",url:u,data:e})}patch(u,e,t){return this.request({...t,method:"PATCH",url:u,data:e})}request(u){let e=gi(u,!0);const t=this.getTransform(),{requestOptions:n}=this.options,r=Object.assign({},n,u.requestOptions),{beforeRequestHook:i,requestCatchHook:o,transformRequestHook:a}=t||{};return ri(i)&&(e=i(e,r)),e.requestOptions=r,e=this.supportFormData(e),new Promise(((u,t)=>{this.axiosInstance.request(e).then((e=>{if(ri(a))try{const t=a(e,r);u(t)}catch(u){t(u||new Error("请求错误!"))}else u(e)})).catch((u=>{ri(o)?t(o(u,r)):t(u)}))}))}}function vi(u){return u?u.split("; ").map((u=>u.split("="))):[]}function wi(u,e){return u?e&&0!==e.length?function(u){const e=Object.keys(u).reduce(((e,t)=>e+`${t}=${u[t]}; `),"");return e.substring(0,e.length-2||0)}(function(u,e){const t=vi(null==e?void 0:e[0]).filter((u=>2===u.length)),n=vi(u).concat(t).filter((u=>2===u.length)),r={};for(const u of n)r[u[0]]?r[u[0]]=u[1]:Object.defineProperty(r,u[0],{value:u[1],enumerable:!0,writable:!0});return r}(u,e)):u:""}function _i(u,e){if(!u)return null;const t=`(?:^|)${e}=([^;]*)(?:;|$)`,n=u.match(t);return n?n[1]:null}function bi(u){return _i(u,"bili_jct")||""}const $i={value:""},Ti={log:Si,error:function(u){Si("error",u)},warn:function(u){Si("warn",u)},info:function(u){Si("info",u)},verbose:function(u){Si("verbose",u)},debug:function(u){Si("debug",u)}};function Si(u,e){const t=Ci().toString().match(/\w{2}:\w{2}:\w{2}/)[0];if(function(u="debug"){const e=["error","warn","info","verbose","debug"],t=e.indexOf(u);return t>0?e.slice(0,t+1):e}().includes(u)){const u=`[${t}] ${e}`;$i.value+=u+"\n"}process.stdout.write(`[${u} ${t}] ${e}\n`)}function Oi(u){try{const e=t.unzipSync(Buffer.from(u,"base64")).toString();try{return decodeURIComponent(function(u){return u.replace(/\\u([\d\w]{4})/gi,((u,e)=>String.fromCodePoint(parseInt(e,16))))}(e))}catch(u){return unescape(e)}}catch(u){throw new Error("Error: 当前字符串不能被Gzip解压")}}class Ii{static configFileName=function(){const u=".json",{BILITOOLS_FILE_NAME:e}=process.env;return e?e.endsWith(u)?e:`${e}.json`:"cat_bili_config"+u}();static isQingLongPanel=!0}var xi={Space_Separator:/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,ID_Start:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,ID_Continue:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},Pi={isSpaceSeparator:u=>"string"==typeof u&&xi.Space_Separator.test(u),isIdStartChar:u=>"string"==typeof u&&(u>="a"&&u<="z"||u>="A"&&u<="Z"||"$"===u||"_"===u||xi.ID_Start.test(u)),isIdContinueChar:u=>"string"==typeof u&&(u>="a"&&u<="z"||u>="A"&&u<="Z"||u>="0"&&u<="9"||"$"===u||"_"===u||"‌"===u||"‍"===u||xi.ID_Continue.test(u)),isDigit:u=>"string"==typeof u&&/[0-9]/.test(u),isHexDigit:u=>"string"==typeof u&&/[0-9A-Fa-f]/.test(u)};let Ni,Li,ki,Ri,Ui,ji,Gi,Mi,Hi;function qi(u,e,t){const n=u[e];if(null!=n&&"object"==typeof n)for(const u in n){const e=qi(n,u,t);void 0===e?delete n[u]:n[u]=e}return t.call(u,e,n)}let Ki,Ji,Yi,zi,Qi;function Wi(){for(Ki="default",Ji="",Yi=!1,zi=1;;){Qi=Vi();const u=Zi[Ki]();if(u)return u}}function Vi(){if(Ni[Ri])return String.fromCodePoint(Ni.codePointAt(Ri))}function Xi(){const u=Vi();return"\n"===u?(Ui++,ji=0):u?ji+=u.length:ji++,u&&(Ri+=u.length),u}const Zi={default(){switch(Qi){case"\t":case"\v":case"\f":case" ":case" ":case"\ufeff":case"\n":case"\r":case"\u2028":case"\u2029":return void Xi();case"/":return Xi(),void(Ki="comment");case void 0:return Xi(),uo("eof")}if(!Pi.isSpaceSeparator(Qi))return Zi[Li]();Xi()},comment(){switch(Qi){case"*":return Xi(),void(Ki="multiLineComment");case"/":return Xi(),void(Ki="singleLineComment")}throw oo(Xi())},multiLineComment(){switch(Qi){case"*":return Xi(),void(Ki="multiLineCommentAsterisk");case void 0:throw oo(Xi())}Xi()},multiLineCommentAsterisk(){switch(Qi){case"*":return void Xi();case"/":return Xi(),void(Ki="default");case void 0:throw oo(Xi())}Xi(),Ki="multiLineComment"},singleLineComment(){switch(Qi){case"\n":case"\r":case"\u2028":case"\u2029":return Xi(),void(Ki="default");case void 0:return Xi(),uo("eof")}Xi()},value(){switch(Qi){case"{":case"[":return uo("punctuator",Xi());case"n":return Xi(),eo("ull"),uo("null",null);case"t":return Xi(),eo("rue"),uo("boolean",!0);case"f":return Xi(),eo("alse"),uo("boolean",!1);case"-":case"+":return"-"===Xi()&&(zi=-1),void(Ki="sign");case".":return Ji=Xi(),void(Ki="decimalPointLeading");case"0":return Ji=Xi(),void(Ki="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return Ji=Xi(),void(Ki="decimalInteger");case"I":return Xi(),eo("nfinity"),uo("numeric",1/0);case"N":return Xi(),eo("aN"),uo("numeric",NaN);case'"':case"'":return Yi='"'===Xi(),Ji="",void(Ki="string")}throw oo(Xi())},identifierNameStartEscape(){if("u"!==Qi)throw oo(Xi());Xi();const u=to();switch(u){case"$":case"_":break;default:if(!Pi.isIdStartChar(u))throw so()}Ji+=u,Ki="identifierName"},identifierName(){switch(Qi){case"$":case"_":case"‌":case"‍":return void(Ji+=Xi());case"\\":return Xi(),void(Ki="identifierNameEscape")}if(!Pi.isIdContinueChar(Qi))return uo("identifier",Ji);Ji+=Xi()},identifierNameEscape(){if("u"!==Qi)throw oo(Xi());Xi();const u=to();switch(u){case"$":case"_":case"‌":case"‍":break;default:if(!Pi.isIdContinueChar(u))throw so()}Ji+=u,Ki="identifierName"},sign(){switch(Qi){case".":return Ji=Xi(),void(Ki="decimalPointLeading");case"0":return Ji=Xi(),void(Ki="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return Ji=Xi(),void(Ki="decimalInteger");case"I":return Xi(),eo("nfinity"),uo("numeric",zi*(1/0));case"N":return Xi(),eo("aN"),uo("numeric",NaN)}throw oo(Xi())},zero(){switch(Qi){case".":return Ji+=Xi(),void(Ki="decimalPoint");case"e":case"E":return Ji+=Xi(),void(Ki="decimalExponent");case"x":case"X":return Ji+=Xi(),void(Ki="hexadecimal")}return uo("numeric",0*zi)},decimalInteger(){switch(Qi){case".":return Ji+=Xi(),void(Ki="decimalPoint");case"e":case"E":return Ji+=Xi(),void(Ki="decimalExponent")}if(!Pi.isDigit(Qi))return uo("numeric",zi*Number(Ji));Ji+=Xi()},decimalPointLeading(){if(Pi.isDigit(Qi))return Ji+=Xi(),void(Ki="decimalFraction");throw oo(Xi())},decimalPoint(){switch(Qi){case"e":case"E":return Ji+=Xi(),void(Ki="decimalExponent")}return Pi.isDigit(Qi)?(Ji+=Xi(),void(Ki="decimalFraction")):uo("numeric",zi*Number(Ji))},decimalFraction(){switch(Qi){case"e":case"E":return Ji+=Xi(),void(Ki="decimalExponent")}if(!Pi.isDigit(Qi))return uo("numeric",zi*Number(Ji));Ji+=Xi()},decimalExponent(){switch(Qi){case"+":case"-":return Ji+=Xi(),void(Ki="decimalExponentSign")}if(Pi.isDigit(Qi))return Ji+=Xi(),void(Ki="decimalExponentInteger");throw oo(Xi())},decimalExponentSign(){if(Pi.isDigit(Qi))return Ji+=Xi(),void(Ki="decimalExponentInteger");throw oo(Xi())},decimalExponentInteger(){if(!Pi.isDigit(Qi))return uo("numeric",zi*Number(Ji));Ji+=Xi()},hexadecimal(){if(Pi.isHexDigit(Qi))return Ji+=Xi(),void(Ki="hexadecimalInteger");throw oo(Xi())},hexadecimalInteger(){if(!Pi.isHexDigit(Qi))return uo("numeric",zi*Number(Ji));Ji+=Xi()},string(){switch(Qi){case"\\":return Xi(),void(Ji+=function(){switch(Vi()){case"b":return Xi(),"\b";case"f":return Xi(),"\f";case"n":return Xi(),"\n";case"r":return Xi(),"\r";case"t":return Xi(),"\t";case"v":return Xi(),"\v";case"0":if(Xi(),Pi.isDigit(Vi()))throw oo(Xi());return"\0";case"x":return Xi(),function(){let u="",e=Vi();if(!Pi.isHexDigit(e))throw oo(Xi());if(u+=Xi(),e=Vi(),!Pi.isHexDigit(e))throw oo(Xi());return u+=Xi(),String.fromCodePoint(parseInt(u,16))}();case"u":return Xi(),to();case"\n":case"\u2028":case"\u2029":return Xi(),"";case"\r":return Xi(),"\n"===Vi()&&Xi(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case void 0:throw oo(Xi())}return Xi()}());case'"':return Yi?(Xi(),uo("string",Ji)):void(Ji+=Xi());case"'":return Yi?void(Ji+=Xi()):(Xi(),uo("string",Ji));case"\n":case"\r":throw oo(Xi());case"\u2028":case"\u2029":!function(u){console.warn(`JSON5: '${co(u)}' in strings is not valid ECMAScript; consider escaping`)}(Qi);break;case void 0:throw oo(Xi())}Ji+=Xi()},start(){switch(Qi){case"{":case"[":return uo("punctuator",Xi())}Ki="value"},beforePropertyName(){switch(Qi){case"$":case"_":return Ji=Xi(),void(Ki="identifierName");case"\\":return Xi(),void(Ki="identifierNameStartEscape");case"}":return uo("punctuator",Xi());case'"':case"'":return Yi='"'===Xi(),void(Ki="string")}if(Pi.isIdStartChar(Qi))return Ji+=Xi(),void(Ki="identifierName");throw oo(Xi())},afterPropertyName(){if(":"===Qi)return uo("punctuator",Xi());throw oo(Xi())},beforePropertyValue(){Ki="value"},afterPropertyValue(){switch(Qi){case",":case"}":return uo("punctuator",Xi())}throw oo(Xi())},beforeArrayValue(){if("]"===Qi)return uo("punctuator",Xi());Ki="value"},afterArrayValue(){switch(Qi){case",":case"]":return uo("punctuator",Xi())}throw oo(Xi())},end(){throw oo(Xi())}};function uo(u,e){return{type:u,value:e,line:Ui,column:ji}}function eo(u){for(const e of u){if(Vi()!==e)throw oo(Xi());Xi()}}function to(){let u="",e=4;for(;e-- >0;){const e=Vi();if(!Pi.isHexDigit(e))throw oo(Xi());u+=Xi()}return String.fromCodePoint(parseInt(u,16))}const no={start(){if("eof"===Gi.type)throw ao();ro()},beforePropertyName(){switch(Gi.type){case"identifier":case"string":return Mi=Gi.value,void(Li="afterPropertyName");case"punctuator":return void io();case"eof":throw ao()}},afterPropertyName(){if("eof"===Gi.type)throw ao();Li="beforePropertyValue"},beforePropertyValue(){if("eof"===Gi.type)throw ao();ro()},beforeArrayValue(){if("eof"===Gi.type)throw ao();"punctuator"!==Gi.type||"]"!==Gi.value?ro():io()},afterPropertyValue(){if("eof"===Gi.type)throw ao();switch(Gi.value){case",":return void(Li="beforePropertyName");case"}":io()}},afterArrayValue(){if("eof"===Gi.type)throw ao();switch(Gi.value){case",":return void(Li="beforeArrayValue");case"]":io()}},end(){}};function ro(){let u;switch(Gi.type){case"punctuator":switch(Gi.value){case"{":u={};break;case"[":u=[]}break;case"null":case"boolean":case"numeric":case"string":u=Gi.value}if(void 0===Hi)Hi=u;else{const e=ki[ki.length-1];Array.isArray(e)?e.push(u):e[Mi]=u}if(null!==u&&"object"==typeof u)ki.push(u),Li=Array.isArray(u)?"beforeArrayValue":"beforePropertyName";else{const u=ki[ki.length-1];Li=null==u?"end":Array.isArray(u)?"afterArrayValue":"afterPropertyValue"}}function io(){ki.pop();const u=ki[ki.length-1];Li=null==u?"end":Array.isArray(u)?"afterArrayValue":"afterPropertyValue"}function oo(u){return Do(void 0===u?`JSON5: invalid end of input at ${Ui}:${ji}`:`JSON5: invalid character '${co(u)}' at ${Ui}:${ji}`)}function ao(){return Do(`JSON5: invalid end of input at ${Ui}:${ji}`)}function so(){return ji-=5,Do(`JSON5: invalid identifier character at ${Ui}:${ji}`)}function co(u){const e={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(e[u])return e[u];if(u<" "){const e=u.charCodeAt(0).toString(16);return"\\x"+("00"+e).substring(e.length)}return u}function Do(u){const e=new SyntaxError(u);return e.lineNumber=Ui,e.columnNumber=ji,e}const fo={parse:function(u,e){Ni=String(u),Li="start",ki=[],Ri=0,Ui=1,ji=0,Gi=void 0,Mi=void 0,Hi=void 0;do{Gi=Wi(),no[Li]()}while("eof"!==Gi.type);return"function"==typeof e?qi({"":Hi},"",e):Hi},stringify:function(u,e,t){const n=[];let r,i,o,a="",s="";if(null==e||"object"!=typeof e||Array.isArray(e)||(t=e.space,o=e.quote,e=e.replacer),"function"==typeof e)i=e;else if(Array.isArray(e)){r=[];for(const u of e){let e;"string"==typeof u?e=u:("number"==typeof u||u instanceof String||u instanceof Number)&&(e=String(u)),void 0!==e&&r.indexOf(e)<0&&r.push(e)}}return t instanceof Number?t=Number(t):t instanceof String&&(t=String(t)),"number"==typeof t?t>0&&(t=Math.min(10,Math.floor(t)),s="          ".substr(0,t)):"string"==typeof t&&(s=t.substr(0,10)),c("",{"":u});function c(u,e){let t=e[u];switch(null!=t&&("function"==typeof t.toJSON5?t=t.toJSON5(u):"function"==typeof t.toJSON&&(t=t.toJSON(u))),i&&(t=i.call(e,u,t)),t instanceof Number?t=Number(t):t instanceof String?t=String(t):t instanceof Boolean&&(t=t.valueOf()),t){case null:return"null";case!0:return"true";case!1:return"false"}return"string"==typeof t?D(t):"number"==typeof t?String(t):"object"==typeof t?Array.isArray(t)?function(u){if(n.indexOf(u)>=0)throw TypeError("Converting circular structure to JSON5");n.push(u);let e=a;a+=s;let t,r=[];for(let e=0;e<u.length;e++){const t=c(String(e),u);r.push(void 0!==t?t:"null")}if(0===r.length)t="[]";else if(""===s){t="["+r.join(",")+"]"}else{let u=",\n"+a,n=r.join(u);t="[\n"+a+n+",\n"+e+"]"}return n.pop(),a=e,t}(t):function(u){if(n.indexOf(u)>=0)throw TypeError("Converting circular structure to JSON5");n.push(u);let e=a;a+=s;let t,i=r||Object.keys(u),o=[];for(const e of i){const t=c(e,u);if(void 0!==t){let u=f(e)+":";""!==s&&(u+=" "),u+=t,o.push(u)}}if(0===o.length)t="{}";else{let u;if(""===s)u=o.join(","),t="{"+u+"}";else{let n=",\n"+a;u=o.join(n),t="{\n"+a+u+",\n"+e+"}"}}return n.pop(),a=e,t}(t):void 0}function D(u){const e={"'":.1,'"':.2},t={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};let n="";for(let r=0;r<u.length;r++){const i=u[r];switch(i){case"'":case'"':e[i]++,n+=i;continue;case"\0":if(Pi.isDigit(u[r+1])){n+="\\x00";continue}}if(t[i])n+=t[i];else if(i<" "){let u=i.charCodeAt(0).toString(16);n+="\\x"+("00"+u).substring(u.length)}else n+=i}const r=o||Object.keys(e).reduce(((u,t)=>e[u]<e[t]?u:t));return n=n.replace(new RegExp(r,"g"),t[r]),r+n+r}function f(u){if(0===u.length)return D(u);const e=String.fromCodePoint(u.codePointAt(0));if(!Pi.isIdStartChar(e))return D(u);for(let t=e.length;t<u.length;t++)if(!Pi.isIdContinueChar(String.fromCodePoint(u.codePointAt(t))))return D(u);return u}}};var lo=fo;const Co=lo||Object.freeze({__proto__:null,default:lo});function po(u){try{let t;if((e.existsSync(u)||e.existsSync(u+="5"))&&(t=e.readFileSync(u,"utf-8")),!t)return;return Ti.verbose(`读取配置文件 ${u}`),Co.parse(t)}catch(u){!function(u){if(!ni(u))return;throw new TypeError("配置文件存在，但是无法解析！可能 JSON5 格式不正确！")}(u.message)}}const Ao=u=>D.resolve(process.cwd(),u),Eo=u=>D.resolve(__dirname,"../",u);function Fo(u){throw new Error(u||"获取配置失败！未找到配置文件！")}const go=Array.from(new Set([Ao("./config/config.dev.json"),Ao(`./config/${Ii.configFileName}`),Ao(`./${Ii.configFileName}`),Eo(`./config/${Ii.configFileName}`),Eo(`./${Ii.configFileName}`)])),mo=["./config.json",Ao("./config/config.json")];function ho(u){let e;if(e=Array.isArray(u)?u:u.account.filter((u=>u.cookie)),0!==e.length)return function(u){const e=process.argv.find((u=>u.includes("--item")||u.includes("-i")||u.includes("-I")));if(!e)return u[0];const t=Number(e.split("=")[1])-1;return!t||t>=u.length||t<0?(Ti.warn("似乎想要指定一个不存在的用户，我们将指定第一个用户"),u[0]):u[t]}(e)}function Bo(){if(globalThis.BILITOOLS_CONFIG)return globalThis.BILITOOLS_CONFIG;go.splice(0,1,...mo);for(let u=0;u<go.length;u++){const e=po(go[u]);if(e)return e}return(()=>{const{BILITOOLS_CONFIG:u,BILI_SCF_CONFIG:e,BILI_CONFIG:t}=process.env,n=u||e||t;if(n)try{return Co.parse(Oi(n))}catch{Fo("环境中的配置不是有效的 JSON 字符串！")}})()}function yo(u){if(u||Fo(),function(u){if(Array.isArray(u))return!0;return Boolean(u.account&&u.account.length)}(u)){const e=ho(u);if(e)return e}return u.cookie||Fo("配置文件中没有 cookie！"),u}function vo(u){return u&&u.map((u=>Number(u))).filter((u=>u>0&&u%1==0))}class wo{constructor(u){var e;this.config=u,this.COOKIE=u.cookie,this.BILIJCT=bi(u.cookie),this.USERID=(e=u.cookie,Number(_i(e,"DedeUserID"))||0),this.USER_AGENT=u.userAgent;const t=u.apiDelay??[2,6];this.BILI_API_DELAY=Array.isArray(t)?vo(t):[Number(t)];const n=Fi(u.message);this.MESSAGE_API=n.api,this.PUSHPLUS_TOKEN=n.pushplusToken||process.env.PUSHPLUS_TOKEN;const r=Fi(u.coin);this.BILI_CUSTOMIZE_UP=vo(r.customizeUp||u.customizeUp)||[],this.BILI_UPPER_ACC_MATCH=!1!==(r.upperAccMatch??u.upperAccMatch),this.BILI_COIN_RETRY_NUM=r.retryNum||u.coinRetryNum||4,this.BILI_TARGET_LEVEL=(r.targetLevel||u.targetLevel)??6,this.BILI_STAY_COINS=(r.stayCoins||u.stayCoins)??0,this.BILI_TARGET_COINS=(r.targetCoins||u.targetCoins)??5;const i=Fi(u.gift);this.BILI_GIFT_UP=vo(i.mids||u.giftUp)||this.BILI_CUSTOMIZE_UP||[];const o=Fi(u.charge);this.CHARGE_ID=o.mid||u.chargeUpId||this.USERID,this.CHARGE_PRESET_TIME=o.presetTime||u.chargePresetTime||31;const a=Fi(u.match);this.MATCH_COINS=(a.coins||u.matchCoins)??5,this.MATCH_SELECTION=(a.selection||u.matchSelection)??1,this.MATCH_DIFF=(a.diff||u.matchDiff)??0;const s=Fi(u.lottery);this.LOTTERY_EXCLUDE=s.excludeAward||ci,this.LOTTERY_INCLUDE=s.includeAward||Di,this.LOTTERY_UP_BLACKLIST=s.blackUid||fi,this.LOTTERY_MOVE_TAG=s.moveTag,this.LOTTERY_PAGE_NUM=s.pageNum||2}}let _o;const bo=new Proxy({},{get:(u,e)=>(_o||To(),Reflect.get(_o,e)),set:(u,e,t)=>"config"===e&&t?(To(t),!0):Reflect.set(_o,e,t)});let $o=null;function To(u){u||(u=yo(Bo())),_o=new wo(yo(u)),$o=class extends class{static money=0;static coinsTask=5;static share=!1;static watch=!1;static currentStartFun=0;static bCoinCouponBalance=0;static vipType=0;static userLevel=0}{},$o.coinsTask=_o.BILI_TARGET_COINS}function So(u){const e=bo.BILI_API_DELAY;let t;t=1===e.length?1e3*e[0]:1e3*pi(e[0]||2,e[1]||6),t=u||t;const n=(new Date).getTime()+parseInt(t,10);for(;(new Date).getTime()<n;);return new Promise((u=>{u("done")}))}const Oo="https://account.bilibili.com",Io="https://live.bilibili.com",xo="https://space.bilibili.com",Po="https://www.bilibili.com/",No="https://account.bilibili.com",Lo="https://api.live.bilibili.com",ko="https://api.bilibili.com",Ro="https://manga.bilibili.com",Uo="https://api.vc.bilibili.com",jo={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.41 Safari/537.36 Edg/101.0.1210.32","content-type":"application/x-www-form-urlencoded; charset=UTF-8","accept-language":"zh-CN,zh;q=0.9"};var Go=[["/twirp/activity.v1.Activity/ClockIn","ERR_BAD_REQUEST"]];const Mo={transformRequestHook:(u,e)=>{const{isTransformResponse:t,isReturnNativeResponse:n}=e;if(n)return u;if(!t)return u.data;const{data:r}=u;return e.isJsonp&&ni(r)?function(u){const e=u.replace(/^\w+\(/,"").replace(/\)$/,"");return JSON.parse(e)}(r):r},beforeRequestHook:(u,e)=>{var t;const{apiUrl:n}=e;n&&ni(n)&&(u.url.startsWith("/")&&n.endsWith("/")?u.url=n+u.url.substring(1):u.url.startsWith("/")||n.endsWith("/")?u.url=`${n}${u.url}`:u.url=`${n}/${u.url}`);const r=u.params||{},i=u.data||!1;return(null===(t=u.method)||void 0===t?void 0:t.toUpperCase())!==A&&(ni(r)?(u.url=u.url+r,u.params=void 0):Reflect.has(u,"data")&&u.data?(u.data=i,u.params=r):(u.data=r,u.params=void 0)),u},requsetInterceptors:u=>{const{requestOptions:e}=u;return!0===e.withBiliCookie&&(u.headers.Cookie=bo.COOKIE),u},responseInterceptors:u=>{var e;u.config.requestOptions.withBiliCookie&&(bo.COOKIE=wi(bo.COOKIE,(null===(e=u.headers)||void 0===e?void 0:e["set-cookie"])||[]));return u},responseInterceptorsCatch:async u=>{const{requestOptions:e,url:t}=u.config;return Go.find((e=>e[0]===t&&e[1]===u.code))||0===e.retry?Promise.reject(u):(e.retry||(e.retry=2),e.__retryCount=e.__retryCount||0,e.__retryCount>=e.retry?Promise.reject(u):(e.__retryCount+=1,await So(e.retryDelay||100),await Ko.request(u.config)))}};function Ho(u){return new yi(mi({timeout:1e4,headers:{"Content-Type":jo["content-type"],"User-Agent":jo["user-agent"],"accept-language":jo["accept-language"]},transform:Mo,requestOptions:{isReturnNativeResponse:!1,isTransformResponse:!0,ignoreCancelToken:!0,retry:2,withBiliCookie:!0},withCredentials:!0},u||{}))}const qo=Ho({requestOptions:{withBiliCookie:!1}}),Ko=Ho();async function Jo(){let u="v0.4.13";u.includes(".")?Ti.info("当前版本【v0.4.13】"):u=void 0;try{if(u||(u=function(){try{return require("../../package.json").version}catch{}}()||function(){try{return f.readFileSync(D.resolve(__dirname,"../version.txt"),"utf8").trim()}catch{}}(),Ti.info(`当前版本【v${u}】`)),!u)return;const e=await async function(){const u={timeout:6e3};try{return(await Promise.any([qo.get("https://api.github.com/repos/catlair/BiliTools/releases/latest",u),qo.get("https://gitee.com/api/v5/repos/catlair/BiliTools/releases/latest",u)])).tag_name}catch(u){return}}();e&&e!==`v${u}`&&Ti.info(`可更新：最新版本【${e}】`)}catch{}}process.env.IS_LOCAL="true",async function(){const{dailyTasks:u}=await Promise.resolve().then((function(){return qs}));await Jo(),await u()}();const Yo={silver2Coin:!0,liveSignTask:!0,addCoins:!0,mangaSign:!1,shareAndWatch:!0,supGroupSign:!1,liveSendMessage:!1,taskReward:!0,charging:!1,getVipPrivilege:!1,giveGift:!1,matchGame:!1,liveLottery:!1};function zo(){return{...Yo}}function Qo(u){const e=function(){const u=zo();for(const e in u)if(Object.prototype.hasOwnProperty.call(u,e)){const t=u[e];switch((bo.config.function||{})[e]){case!0:!1===t&&(u[e]=!0);break;case!1:!0===t&&(u[e]=!1)}}return u.addCoins||u.shareAndWatch||(u.taskReward=!1),u}();return u.map((u=>e[u.name]?u:null)).filter((u=>u))}function Wo(){var u;const e=(null===(u=bo.config)||void 0===u?void 0:u.message)||{};["GOBOT_URL","GOBOT_TOKEN","GOBOT_QQ","SCKEY","QQ_SKEY","QQ_MODE","BARK_PUSH","BARK_SOUND","BARK_GROUP","TG_BOT_TOKEN","TG_USER_ID","TG_PROXY_AUTH","TG_PROXY_HOST","TG_PROXY_PORT","TG_API_HOST","DD_BOT_TOKEN","DD_BOT_SECRET","QYWX_KEY","QYWX_AM","IGOT_PUSH_KEY","PUSH_PLUS_TOKEN","PUSH_PLUS_USER"].forEach((u=>{const t=e[(n=u,n.toLowerCase().replace(/_(\w)/g,((u,e)=>e.toUpperCase())))]||e[u]||process.env[u];var n;t&&(process.env[u]=t)})),bo.PUSHPLUS_TOKEN&&(process.env.PUSH_PLUS_TOKEN=bo.PUSHPLUS_TOKEN),function(){process.env.PUSH_KEY&&(Vo=process.env.PUSH_KEY);process.env.QQ_SKEY&&(da=process.env.QQ_SKEY);process.env.QQ_MODE&&(pa=process.env.QQ_MODE);process.env.BARK_PUSH?(Xo=process.env.BARK_PUSH.indexOf("https")>-1||process.env.BARK_PUSH.indexOf("http")>-1?process.env.BARK_PUSH:`https://api.day.app/${process.env.BARK_PUSH}`,process.env.BARK_SOUND&&(Zo=process.env.BARK_SOUND),process.env.BARK_GROUP&&(ua=process.env.BARK_GROUP)):Xo&&-1===Xo.indexOf("https")&&-1===Xo.indexOf("http")&&(Xo=`https://api.day.app/${Xo}`);process.env.TG_BOT_TOKEN&&(ea=process.env.TG_BOT_TOKEN);process.env.TG_USER_ID&&(ta=process.env.TG_USER_ID);process.env.TG_PROXY_AUTH&&(ia=process.env.TG_PROXY_AUTH);process.env.TG_PROXY_HOST&&(na=process.env.TG_PROXY_HOST);process.env.TG_PROXY_PORT&&(ra=process.env.TG_PROXY_PORT);process.env.TG_API_HOST&&(oa=process.env.TG_API_HOST);process.env.DD_BOT_TOKEN&&(aa=process.env.DD_BOT_TOKEN,process.env.DD_BOT_SECRET&&(sa=process.env.DD_BOT_SECRET));process.env.QYWX_KEY&&(ca=process.env.QYWX_KEY);process.env.QYWX_AM&&(Da=process.env.QYWX_AM);process.env.IGOT_PUSH_KEY&&(fa=process.env.IGOT_PUSH_KEY);process.env.PUSH_PLUS_TOKEN&&(la=process.env.PUSH_PLUS_TOKEN);process.env.PUSH_PLUS_USER&&(Ca=process.env.PUSH_PLUS_USER)}()}let Vo="",Xo="",Zo="",ua="QingLong",ea="",ta="",na="",ra="",ia="",oa="api.telegram.org",aa="",sa="",ca="",Da="",fa="",la="",Ca="",da="",pa="";async function Aa(u,e){var t;const n=null===(t=bo.config.message)||void 0===t?void 0:t.email;if(!(n&&n.pass&&n.from&&n.host))return;const r=Number(n.port)||465,i=l.createTransport({host:n.host,port:r,secure:465===r,auth:{user:n.from,pass:n.pass}}),o=await i.sendMail({from:`${u} <${n.from}>`,to:n.to,subject:u,headers:{"Content-Type":"text/plain; charset=utf-8"},text:e.replace(/\n/g,"\r\n")});Ti.info(`邮件消息已发送: ${o.messageId}`)}async function Ea(u,e){try{const t=bo.MESSAGE_API;if(!t)return;const n=t.replace("{title}",u).replace("{text}",e);await qo.get(n)}catch(u){Ti.info(`自定义接口消息发送失败: ${u}`),Ti.error(u)}}function Fa(u,e,t=2100){return new Promise((n=>{if(Vo){e=e.replace(/[\n\r]/g,"\n\n");const r={url:Vo.includes("SCT")?`https://sctapi.ftqq.com/${Vo}.send`:`https://sc.ftqq.com/${Vo}.send`,params:`text=${u}&desp=${e}`,headers:{"Content-Type":"application/x-www-form-urlencoded"},timeout:15e3};setTimeout((()=>{qo.post(r).then((u=>{0===u.errno||0===u.data.errno?Ti.info("server酱发送通知消息成功🎉"):1024===u.errno?Ti.info(`server酱发送通知消息异常: ${u.errmsg}`):Ti.info(`server酱发送通知消息异常\n${JSON.stringify(u)}`)})).catch((u=>{Ti.info("发送通知调用API失败！！"),Ti.info(u)})).finally((()=>{n("")}))}),t)}else n("")}))}function ga(u,e){return new Promise((t=>{if(da){const n={url:`https://push.xuthus.cc/${pa}/${da}`,headers:{"Content-Type":"application/json"},data:{},params:{}};u=u.replace(/京豆/g,"豆豆"),e=(e=(e=e.replace(/京豆/g,"")).replace(/🐶/g,"")).replace(/红包/g,"H包"),"email"===pa?n.data={t:u,c:e}:n.params=`${u}\n\n${e}`;const r=function(u){switch(u){case"send":return"个人";case"group":return"QQ群";case"wx":return"微信";case"ww":return"企业微信";case"email":return"邮件";default:return"未知方式"}};qo.post(n).then((u=>{200===u.code?Ti.info(`酷推发送${r(pa)}通知消息成功🎉`):400===u.code?Ti.info(`QQ酷推(Cool Push)发送${r(pa)}推送失败：${u.msg}`):503===u.code?Ti.info(`QQ酷推出错，${u.message}：${u.data}`):Ti.info(`酷推推送异常: ${JSON.stringify(u)}`)})).catch((u=>{Ti.info(`发送${r(pa)}通知调用API失败！！`),Ti.info(u)})).finally((()=>{t("")}))}else t("")}))}function ma(u,e,t={}){return new Promise((n=>{if(Xo){const r={url:`${Xo}/${encodeURIComponent(u)}/${encodeURIComponent(e)}?sound=${Zo}&group=${ua}&${hi(t)}`,headers:{"Content-Type":"application/x-www-form-urlencoded"},timeout:15e3};qo.get(r).then((u=>{200===u.code?Ti.info("Bark APP发送通知消息成功🎉"):Ti.info(`Bark APP发送通失败：${u.message}`)})).catch((u=>{Ti.info("Bark APP发送通知调用API失败！！"),Ti.error(u)})).finally((()=>{n("")}))}n("")}))}function ha(u,e){return new Promise((t=>{if(ea&&ta){const n={url:`https://${oa}/bot${ea}/sendMessage`,params:`chat_id=${ta}&text=${u}\n\n${e}&disable_web_page_preview=true`,headers:{"Content-Type":"application/x-www-form-urlencoded"},timeout:15e3};if(na&&ra){const u=C.httpsOverHttp({proxy:{host:na,port:+ra,proxyAuth:ia}});Object.assign(n,{httpsAgent:u})}qo.post(n).then((u=>{u.ok?Ti.info("Telegram发送通知消息成功🎉。"):400===u.error_code?Ti.info("请主动给bot发送一条消息并检查接收用户ID是否正确。"):401===u.error_code&&Ti.info("Telegram bot token 填写错误。")})).catch((u=>{Ti.info("telegram发送通知消息失败！！"),Ti.info(u)})).finally((()=>{t("")}))}else t("")}))}function Ba(u,e){return new Promise((t=>{const n={url:`https://oapi.dingtalk.com/robot/send?access_token=${aa}`,data:{msgtype:"text",text:{content:` ${u}\n\n${e}`}},headers:{"Content-Type":"application/json"},timeout:15e3};if(aa){if(sa){const u=require("crypto"),e=Date.now(),t=u.createHmac("sha256",sa);t.update(`${e}\n${sa}`);const r=encodeURIComponent(t.digest("base64"));n.url=`${n.url}&timestamp=${e}&sign=${r}`}qo.post(n).then((u=>{0===u.errcode?Ti.info("钉钉发送通知消息成功🎉。"):Ti.info(`钉钉发送通知失败：${u.errmsg}`)})).catch((u=>{Ti.info("钉钉发送通知消息失败！！"),Ti.info(u)})),t("")}else t("")}))}function ya(u,e){return new Promise((t=>{const n={url:`https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=${ca}`,data:{msgtype:"text",text:{content:` ${u}\n\n${e}`}},headers:{"Content-Type":"application/json"},timeout:15e3};ca&&qo.post(n).then((u=>{0===u.errcode?Ti.info("企业微信发送通知消息成功🎉。"):Ti.info(`企业微信发送通知失败：${u.errmsg}`)})).catch((u=>{Ti.info("企业微信发送通知消息失败！！"),Ti.info(u)})).finally((()=>{t("")})),t("")}))}function va(u){const e=Da.split(",");if(e[2]){const t=e[2].split("|");let n="";for(let e=0;e<t.length;e++){const r="签到号 "+(e+1);u.match(r)&&(n=t[e])}return n||(n=e[2]),n}return"@all"}function wa(u,e){return new Promise((t=>{if(Da){const n=Da.split(","),r={url:"https://qyapi.weixin.qq.com/cgi-bin/gettoken",data:{corpid:`${n[0]}`,corpsecret:`${n[1]}`},headers:{"Content-Type":"application/json"},timeout:15e3};qo.post(r).then((r=>{const i=e.replace(/\n/g,"<br/>"),o=JSON.parse(r).access_token;let a;switch(n[4]){case"0":a={msgtype:"textcard",textcard:{title:`${u}`,description:`${e}`,url:"https://github.com/whyour/qinglong",btntxt:"更多"}};break;case"1":a={msgtype:"text",text:{content:`${u}\n\n${e}`}};break;default:a={msgtype:"mpnews",mpnews:{articles:[{title:`${u}`,thumb_media_id:`${n[4]}`,author:"智能助手",content_source_url:"",content:`${i}`,digest:`${e}`}]}}}n[4]||(a={msgtype:"text",text:{content:`${u}\n\n${e}`}}),a={url:`https://qyapi.weixin.qq.com/cgi-bin/message/send?access_token=${o}`,data:{touser:`${va(e)}`,agentid:`${n[3]}`,safe:"0",...a},headers:{"Content-Type":"application/json"}},qo.post(a).then((u=>{0===u.errcode?Ti.info("成员ID:"+va(e)+"企业微信应用消息发送通知消息成功🎉。"):Ti.info(`企业微信应用：${u.errmsg}`)})).catch((u=>{Ti.info("成员ID:"+va(e)+"企业微信应用消息发送通知消息失败！！"),Ti.info(u)})).finally((()=>{t("")}))})).catch((u=>{Ti.error("企业微信应用消息发送通知消息失败！！")}))}else t("")}))}function _a(u,e,t={}){return new Promise((n=>{if(fa){if(!new RegExp("^[a-zA-Z0-9]{24}$").test(fa))return Ti.info("您所提供的IGOT_PUSH_KEY无效"),void n("");const r={url:`https://push.hellyw.com/${fa.toLowerCase()}`,params:`title=${u}&content=${e}&${hi(t)}`,headers:{"Content-Type":"application/x-www-form-urlencoded"},timeout:15e3};qo.post(r).then((u=>{"string"==typeof u&&(u=JSON.parse(u)),0===u.ret?Ti.info("iGot发送通知消息成功🎉"):Ti.info(`iGot发送通知消息失败：${u.errMsg}`)})).catch((u=>{Ti.info("发送通知调用API失败！！"),Ti.info(u)})).finally((()=>{n("")}))}else n("")}))}function ba(u,e){return new Promise((t=>{if(la){e=e.replace(/[\n\r]/g,"<br>");const n={url:"https://www.pushplus.plus/send",params:{token:`${la}`,title:`${u}`,content:`${e}`,topic:`${Ca}`},headers:{"Content-Type":" application/json"},timeout:15e3};qo.post(n).then((u=>{200===u.code?Ti.info(`push+发送${Ca?"一对多":"一对一"}通知消息完成。`):Ti.info(`push+发送${Ca?"一对多":"一对一"}通知消息失败：${u.msg}`)})).catch((u=>{Ti.info(`push+发送${Ca?"一对多":"一对一"}通知消息失败！！`),Ti.info(u)})).finally((()=>{t("")}))}else t("")}))}async function $a(u,e){Ti.info("----【消息推送】----"),u=`Bili-${$o.nickname}-${u}`,await async function(u,e,t={},n){Wo(),e+=n,await Promise.all([Fa(u,e),ba(u,e)]),await Promise.all([ma(u,e,t),ha(u,e),Ba(u,e),ya(u,e),wa(u,e),_a(u,e,t),Aa(u,e),Ea(u,e),ga(u,e)])}(u,e,void 0,"")}const Ta=Ho({baseURL:No,headers:{"User-Agent":bo.USER_AGENT}}),Sa=Ho({baseURL:Lo,headers:{Referer:Po,"User-Agent":bo.USER_AGENT}}),Oa=Ho({baseURL:ko,headers:{Referer:Po,"User-Agent":bo.USER_AGENT}}),Ia=Ho({baseURL:Ro,headers:{"User-Agent":bo.USER_AGENT}}),xa=Ho({baseURL:Uo,headers:{"User-Agent":bo.USER_AGENT}});function Pa(u=3394945){const e=(new Date).getTime();return Sa.get(`/xlive/web-room/v1/gift/bag_list?t=${e}&room_id=${u}`)}function Na(u=1,e=10){return u>10&&(u=10),Sa.get(`/xlive/app-ucenter/v1/user/GetMyMedals?page=${u}&page_size=${e}`)}function La({ruid:u,gift_num:e,bag_id:t,gift_id:n,roomid:r}){const i=bo.BILIJCT,o=i,a={gift_id:n,ruid:u,gift_num:e,bag_id:t,biz_id:r,rnd:(new Date).getTime(),send_ruid:0,storm_beat_id:0,metadata:"",price:0,visit_id:"",csrf:i,platform:"pc",biz_code:"Live",csrf_token:o,uid:bo.USERID};return Sa.post("/xlive/revenue/v2/gift/sendBag",a,{headers:{Origin:Io}})}function ka(){return Oa.get("/x/web-interface/nav",{headers:{Origin:Oo}})}function Ra(){return Oa.get("/x/web-interface/coin/today/exp")}function Ua(u=1,e=50,t){return Oa.get("/x/relation/tag",{params:{tagid:t,pn:u,ps:e}})}function ja(u,e){return Oa.post("/x/relation/tags/addUsers?cross_domain=true",{fids:u,tagids:e,csrf:bo.BILIJCT},{headers:{Origin:xo}})}function Ga(u){const e=u.level_info,t=e.current_level;if(t>=bo.BILI_TARGET_LEVEL&&($o.coinsTask=0),Ti.info(`当前等级: ${e.current_level}`),t>=6){const u=bo.config.function;u.shareAndWatch=!1,u.addCoins=!1,u.taskReward=!1,Ti.info("已经满级，不需要再投币了，做个白嫖怪吧")}else{const u=e.next_exp-e.current_exp;Ti.info(`距离升级还需要 ${u} 经验，预计 ${function(u){if(bo.BILI_TARGET_COINS<=0)return u/15;const e=10*bo.BILI_TARGET_COINS+15,t=u/e,n=$o.money/(bo.BILI_TARGET_COINS-1);return t<n?Math.floor(t):(u-n*e)/25+n}(u).toFixed(2)} 天`)}}async function Ma(u){try{var e;const{data:t}=await Ta.get("/site/getCoin");Ti.info(`登录成功: ${u.uname}`),Ti.info(`硬币余额: ${t.money||0}`),$o.nickname=function(u){const e=u.length;return e<=3?u:`${u[0]}**${u[e-1]}`}(u.uname),$o.money=t.money||0,$o.userLevel=u.level_info.current_level,$o.bCoinCouponBalance=(null===(e=u.wallet)||void 0===e?void 0:e.coupon_balance)||0,Ga(u),function(u){let e="";switch($o.vipType=u.vipType,u.vipType){case 0:e="无大会员";break;case 1:e="月度大会员";break;case 2:e="年度大会员"}0===u.vipStatus&&(e="无大会员"===e?e:e+"[已过期]"),Ti.info(`大会员状态: ${e}`)}(u)}catch(u){Ti.error(`获取硬币信息异常: ${u.message}`),Ti.debug(u)}}function Ha(u,e,t=1){return Oa.post("/x/web-interface/coin/add",{aid:u,multiply:e,selectLike:t,csrf:bo.BILIJCT})}function qa(u,e=1){return Ko.post("https://www.bilibili.com/audio/music-service-c/web/coin/add",{sid:u,multiply:e,csrf:bo.BILIJCT})}const Ka="video",Ja="audio",Ya="article";async function za(u=!0){try{const n=bo.USERID,{data:r,message:i,code:o}=await(u?Ua(e,t,-10):function(u,e,t,n,r){return Oa.get("/x/relation/followings",{params:{vmid:u,pn:e,ps:t,order:n,order_type:r}})}(n)),a=u?r:r.list;if(!a||0===a.length)return{msg:"-1",data:{}};if(0===o){await So();const{mid:u}=Bi(a)||{};return await Va(u)}return{msg:u?`未获取到特别关注列表: ${o}-${i}`:`未获取到关注列表: ${o}-${i}`,data:{}}}catch(u){return{msg:u.message,data:{}}}var e,t}async function Qa(){const u=Bi([1,3,4,5,160,22,119]);try{const{data:e,message:t,code:n}=await function(u,e){return Oa.get("/x/web-interface/ranking/region",{params:{rid:u,day:e}})}(u,3);if(0==n){const{aid:u,title:t,author:n}=Bi(e);return{msg:"0",data:{id:Number(u),title:t,author:n}}}return{msg:`未获取到排行信息: ${n}-${t}`,data:{}}}catch(u){return{msg:u.message,data:{}}}}async function Wa(){const u=bo.BILI_CUSTOMIZE_UP;return 0===u.length?{msg:"-1",data:{}}:await Va(Bi(u))}async function Va(u){try{const{code:e,data:t,message:n}=await function(u){return Oa.get(`/x/space/navnum?mid=${u}`)}(u);if(e)return{msg:`通过uid获取视频失败: ${e}-${n}`,data:{}};await So();const{video:r,audio:i,article:o}=t,{type:a,page:s,index:c}=function([u,e,t]){const n=u+e+t;if(!n)return;const r=pi(0,n-1);let i=r;if(r<u)return{type:Ka,page:di(30,i+1),index:i%30};const o=u+e;return i=r-u,r<o?{type:Ja,page:di(30,i+1),index:i%30}:(i=r-o,{type:Ya,page:di(12,i+1),index:i%12})}([r,i,o]),D={[Ka]:Xa,[Ja]:Za,[Ya]:us},f=await D[a](u,s,c);return f.message?{msg:f.message,data:{}}:{msg:"0",data:f}}catch(u){return Ti.debug(u),{msg:u.message,data:{}}}}async function Xa(u,e,t){const{code:n,data:r,message:i}=await function(u,e,t=1,n=""){return Oa.get("/x/space/arc/search",{params:{jsonp:"jsonp",order:"pubdate",keyword:n,pn:t,tid:0,ps:e,mid:u}})}(u,30,e);if(n)return{message:i};const{aid:o,title:a,author:s}=r.list.vlist[t];return{type:Ka,id:o,title:a,author:s}}async function Za(u,e,t){const{code:n,data:r,msg:i}=await function(u,e,t=1){return Oa.get("/audio/music-service/web/song/upper",{params:{jsonp:"jsonp",order:1,pn:t,ps:e,uid:u}})}(u,30,e);if(n)return{message:i};const{data:o}=r,{id:a,uname:s,title:c}=o[t];return{type:Ja,id:a,title:c,author:s}}async function us(u,e,t){const{code:n,data:r,message:i}=await function(u,e,t=1){return Oa.get("/x/space/article",{params:{callback:"__test",jsonp:"jsonp",sort:"publish_time",pn:t,ps:e,mid:u},requestOptions:{isJsonp:!0}})}(u,12,e);if(n)return{message:i};const{articles:o}=r,{id:a,title:s,author:{name:c}}=o[t];return{type:Ya,id:a,title:s,author:c,mid:u}}const es=function(){const u=[Wa,za,()=>za(!1),Qa];return bo.BILI_CUSTOMIZE_UP||u.shift(),u}();async function ts(u=0){es.splice(0,$o.currentStartFun+u);for(let u=0;u<es.length;u++){const e=es[u];let t=Number(bo.BILI_COIN_RETRY_NUM??4);for(t=t<1?1:t>8?8:t;t--;){await So();const u=await e();if("-1"===u.msg&&(t=0),"0"===u.msg)return u}t<=0&&($o.currentStartFun=u)}return{msg:"-1",data:{id:0}}}async function ns({id:u,coin:e,type:t,mid:n}){const r={[Ka]:Ha,[Ja]:qa,[Ya]:(u,e=1)=>function(u,e,t=1){return Oa.post("/x/web-interface/coin/add",{aid:e,upid:u,avtype:2,multiply:t,csrf:bo.BILIJCT})}(n,u,e)},i=await r[t](Number(u),e);return{code:i.code,message:i.message||i.msg}}async function rs(u){if(await async function(){try{const{data:u,code:e}=await Ra();if(0==e){const e=bo.BILI_TARGET_COINS-u/10;$o.coinsTask=e>0?e:0}}catch(u){}}(),$o.coinsTask<=0||$o.money<=0)return!0;const{data:e,msg:t}=await ts(u.priority);return null!=e&&e.id&&"0"==t?(await So(),await async function(u,e){const{id:t,title:n,author:r,type:i,mid:o}=u;try{const u=await ns({id:t,type:i,mid:o});if(0===u.code)$o.money--,$o.coinsTask--,e.num++,Ti.info(`给[${n}--up【${r}】]投币成功`);else if(34005===u.code)e.fillCount++,Ti.verbose(`当前稿件[${t}]不能再投币了`),e.fillCount>=3&&(Ti.warn("自定义用户组投币似乎没有币可投了"),e.priority++);else{if(-111===u.code||-104===u.code)return Ti.warn(`${t} ${u.message} 无法继续进行投币`),!0;if(e.eCount++,Ti.warn(`给${t}投币失败 ${u.code} ${u.message}`),e.prevCode===u.code)return!0;e.prevCode=u.code}}catch(u){e.eCount++,Ti.error(`投币异常 ${u.message}`)}finally{await So(1500)}return!1}(e,u)):(u.eCount++,!1)}async function is(){try{const{data:u,code:e,message:t}=await xa.get("/link_group/v1/member/my_groups");return 0===e?(null==u?void 0:u.list)||[]:(Ti.warn(`获取自己的应援团异常失败: ${t}`),[])}catch(u){Ti.error(`获取自己的应援团异常: ${u}`)}}const os=["(⌒▽⌒)","（￣▽￣）","(=・ω・=)","(｀・ω・´)","(〜￣△￣)〜","(･∀･)","(°∀°)ﾉ","(￣3￣)","╮(￣▽￣)╭","_(:3」∠)_","( ´_ゝ｀)","←_←","→_→","(<_<)","(>_>)","(;¬_¬)","(ﾟДﾟ≡ﾟдﾟ)!?","Σ(ﾟдﾟ;)","Σ( ￣□￣||)","(´；ω；`)","（/TДT)/","(^・ω・^ )","(｡･ω･｡)","(●￣(ｴ)￣●)","ε=ε=(ノ≧∇≦)ノ","(´･_･`)","(-_-#)","（￣へ￣）","(￣ε(#￣) Σ","ヽ(`Д´)ﾉ","（#-_-)┯━┯","(╯°口°)╯(┴—┴","←◡←","( ♥д♥)","Σ>―(〃°ω°〃)♡→","⁄(⁄ ⁄•⁄ω⁄•⁄ ⁄)⁄","(╬ﾟдﾟ)▄︻┻┳═一","･*･:≡(　ε:)","(汗)","(苦笑)"].concat("1","2","3","4","5","6","7","8","9","签到","哈哈");async function as(){try{const{code:n,message:r,data:i}=await(u=1,e=256,t=bo.USERID,Sa.get(`/xlive/app-ucenter/v1/fansMedal/panel?page=${u}&page_size=${e}&target_id=${t}`));return 0!==n?(Ti.verbose(`获取勋章信息失败 ${n} ${r}`),null):i}catch(u){return Ti.error(`获取勋章异常 ${u.message}`),null}var u,e,t}async function ss(u,e){const t=os[pi(os.length-1)];try{const{code:n,message:r}=await function(u,e){const t=bo.BILIJCT,n=t;return e||(e=pi(10).toString()),Sa.post("/msg/send",{color:5566168,fontsize:25,mode:1,msg:e,rnd:Date.now(),roomid:u,bubble:0,csrf:t,csrf_token:n})}(u,t);return 0===n||(11e3===n?(Ti.warn(`【${e}】${u}-可能未开启评论`),!1):(Ti.warn(`【${e}】${u}-发送失败 ${r}`),Ti.verbose(`code: ${n}`),!1))}catch(u){Ti.verbose(`发送弹幕异常 ${u.message}`)}}async function cs(){try{const{data:u,message:e,code:t}=await ka();if(0!==t)return void Ti.warn(`获取用户信息失败：${t} ${e}`);!function(u){var e;$o.bCoinCouponBalance=(null===(e=u.wallet)||void 0===e?void 0:e.coupon_balance)||0}(u)}catch(u){Ti.error(`获取用户信息异常：${u.message}`)}}var Ds;async function fs(u){try{const e=function(u){switch(u){case 1:return"B 币券";case 2:return"大会员优惠券";default:return""}}(u),{code:t,message:n}=await function(u){return Oa.post("/x/vip/privilege/receive",{csrf:bo.BILIJCT,type:u})}(u);let r="成功";return 0===t&&(r=`失败 ${n}`),Ti.info(`领取${e} ${r}`),!0}catch(u){Ti.error(`领取权益出现异常：${u.message}`)}return!1}async function ls(u){let e=0,t=!1;for(;!(t||(t=await fs(u),e>2));)e++;return t}!function(u){u[u["成功"]=4]="成功",u[u["低于20电池"]=-2]="低于20电池",u[u["B币不足"]=-4]="B币不足"}(Ds||(Ds={}));let Cs=0;async function ds(){try{const{data:{list:u}}=await Pa();return u.filter((u=>{if(u.expire_at<=0)return!1;const e=(1e3*u.expire_at-(new Date).getTime())/864e5<2,t=![1,30607].includes(u.gift_id);return t&&e&&Ti.info(`${u.gift_name} 即将过期请尽快投喂`),!t&&e}))}catch(u){if(Cs)return null;await ds(),Cs++}}async function ps(u){try{const{data:{live_room:e,name:t}}=await function(u){return Oa.get(`/x/space/acc/info?mid=${u}&jsonp=jsonp`)}(u);if(await So(),e.roomStatus)return{roomid:e.roomid,name:t}}catch{}}function As(u,e,t,n){const r=bo.BILIJCT,i={is_fav:0,main_id:e,oid:u,detail_id:t,count:n,csrf:r,csrf_token:r};return Oa.post("/x/esports/guess/add",i)}function Es(){return $o.money-bo.MATCH_COINS<bo.BILI_TARGET_COINS&&(Ti.info(`需要保留${bo.BILI_TARGET_COINS}个硬币，任务结束`),!0)}function Fs(u,e,t,n,r){const i=bi(bo.COOKIE),o=i,a=[(s=bo.COOKIE,_i(s,"LIVE_BUVID")||""),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(u=>{const e=16*Math.random()|0;return("x"===u?e:3&e|8).toString(16)}))];var s;return{ua:bo.USER_AGENT,id:[t,e,r,u],csrf_token:i,csrf:o,device:a,uname:n}}async function gs(){try{await Ko.get("https://api.live.bilibili.com/relation/v1/Feed/heartBeat")}catch{}}async function ms(u){const{data:{area_id:e,parent_area_id:t,room_id:n}}=await function(u){return Sa.get(`/room/v1/Room/get_info?room_id=${u}&from=room`)}(u);return{room_id:n,area_id:e,parent_area_id:t}}async function hs(u,e){const t={id:JSON.stringify(u.id),device:JSON.stringify(u.device),ts:(new Date).getTime(),is_patch:0,heart_beat:"[]",ua:u.ua,visit_id:"",csrf:u.csrf,csrf_token:u.csrf_token};try{const{data:n,code:r}=await function(u){return Ko.post("https://live-trace.bilibili.com/xlive/data-interface/v1/x25Kn/E",u)}(t);if(0===r)return Ti.info(`进入【${u.uname}】的直播间`),e.v++,n}catch(u){Ti.verbose(u)}}async function Bs(u,e,t){if(t.v>6)return;const n={id:JSON.stringify(e.id),device:JSON.stringify(e.device),ets:u.timestamp,benchmark:u.secret_key,time:60,ts:(new Date).getTime(),ua:e.ua},r=function(u,e){const[t,n,r,i]=JSON.parse(u.id),[o,a]=JSON.parse(u.device),{ets:s,time:c,ts:D}=u,f={platform:"web",parent_id:t,area_id:n,seq_id:r,room_id:i,buvid:o,uuid:a,ets:s,time:c,ts:D},l=u.benchmark,C=["MD5","SHA1","SHA256","SHA224","SHA512","SHA384"];let d=JSON.stringify(f);for(const u of e)d=p.createHmac(C[u],l).update(d).digest("hex");return d}(n,u.secret_rule);try{const{data:u,code:i,message:o}=await function(u){return Ko.post("https://live-trace.bilibili.com/xlive/data-interface/v1/x25Kn/X",u)}(Object.assign({visit_id:"",csrf:e.csrf,csrf_token:e.csrf_token,s:r},n));return 0===i?(Ti.info(`向【${e.uname}】发送第${t.v}次心跳`),t.v++):Ti.warn(`向【${e.uname}】发送第${t.v}次心跳失败 ${i} ${o}`),u}catch(u){Ti.verbose(u)}}async function ys(u=1,e=10){try{const{code:t,message:n,data:r}=await Na(u,e);return 0!==t?(Ti.verbose(`获取直播间失败 ${t} ${n}`),null):r}catch(u){return Ti.verbose(`获取直播间异常 ${u.message}`),null}}async function vs(u=!0){const e=await async function(){let u=0;try{var e,t;const{data:n,code:r}=await Pa();return 0!==r||(null===(e=n.list)||void 0===e?void 0:e.length)<=0?24:(null===(t=n.list)||void 0===t||t.forEach((e=>{if(30607===e.gift_id){const t=(1e3*e.expire_at-(new Date).getTime())/864e5;t>6&&t<=7&&(u+=e.gift_num)}})),u>=24?0:24-u)}catch(u){}return 24}();let t;return u?t=await async function(){const{items:u,page_info:e}=await ys();let{total_page:t}=e;if(t&&t>1){t=t>3?3:t;for(let e=2;e<=t;e++){const t=await ys(e,10);u.push(...t.items)}}return u}():({items:t}=await ys()),{fansMedalList:t,heartNum:e}}async function ws(u,e,t,n){if(!n.v||e[t])return await gs(),await So(500),0===n.v?e[t]=await hs(u,n):e[t]=await Bs(e[t],u,n),"done"}async function _s(u,e){const t=[];let n=0;for(let r=0;r<6;r++){let i=0;if(i>=e)break;const o=u.length;n=0;for(let a=0;a<o&&!(i>=e);a++){const e=(new Date).getTime(),o=u[a],{roomid:s,uname:c}=o,{room_id:D,area_id:f,parent_area_id:l}=await ms(s),C=Fs(D,f,l,c,r);await ws(C,t,a,{v:r}),await So(2e3),n+=(new Date).getTime()-e,i++}r<5&&await So(6e4-n)}return"done"}async function bs(u){const{data:e,code:t}=await Oa.get("/x/relation/tags?jsonp=jsonp&callback=__jp3",{headers:{Referer:"https://space.bilibili.com/1/fans/follow?tagid=0"},requestOptions:{isJsonp:!0}});if(0===t)return e.find((e=>e.name===u));Ti.warn(`获取分组列表失败: ${t}`)}async function $s(u){const e=await bs(u);if(e)return e.tagid;await So(300);const{data:t,code:n,message:r}=await(i=u,Oa.post("/x/relation/tag/create",{tag:i,jsonp:"jsonp",csrf:bo.BILIJCT}));var i;if(22106===n){await So(300);const e=await bs(u);return e&&e.tagid}return 0!==n&&Ti.warn(`创建分组失败: ${n}-${r}`),t.tagid}async function Ts(u,e,t,n=1){if(u.length>e.length)return;const{data:r,code:i,message:o}=await Ua(n,20,0);if(0===i){for(const{mid:n,uname:i}of r){if(u.length>=e.length)return;if(n===t)return;(e.includes(n)||e.includes(i))&&u.push({mid:n,uname:i})}if(!(r.length<20))return await Ts(u,e,t,n+1)}else Ti.warn(`获取关注用户失败: ${i}-${o}`)}const Ss=0,Os=1,Is=5,xs=1,Ps=504,Ns=1096;let Ls;async function ks(){try{const{data:u,code:e,message:t}=await Sa.get("/xlive/web-interface/v1/index/getWebAreaList?source_id=2");return 0!==e&&Ti.info(`获取直播分区失败: ${e}-${t}`),u.data.map((u=>u.list)).map((u=>u.map((u=>({areaId:u.id,parentId:u.parent_id})))))}catch(u){throw Ti.error(`获取直播分区异常: ${u.message}`),u}}async function Rs(u,e,t=1){try{await So(100);const{data:n,code:r,message:i}=await function(u,e,t){return Sa.get(`/xlive/web-interface/v1/second/getList?platform=web&parent_area_id=${u}&area_id=${e}&page=${t}`)}(e,u,t);return 0!==r&&Ti.info(`获取直播间列表失败: ${r}-${i}`),function(u){const e=[],t=[];return u.forEach((u=>{const n=u.pendant_info[2];n&&(n.pendent_id===Ps?e.push(u):n.pendent_id===Ns&&t.push(u))})),{lotteryTime:e,lotteryPacket:t}}(n.list).lotteryTime}catch(u){throw Ti.error(`获取直播间列表异常: ${u.message}`),u}}async function Us(u,e,t=1){const n=await Rs(u,e,t),r=[];for(const u of n){const e=await js(u);e&&(r.push({...e,uid:u.uid,uname:u.uname}),await So(100))}return r}async function js(u){if(bo.LOTTERY_UP_BLACKLIST.includes(u.uid))return void Ti.info(`跳过黑名单用户: ${u.uname}`);let e,t,n;try{({data:t,code:e,message:n}=await(r=u.roomid,Sa.get(`/xlive/lottery-interface/v1/Anchor/Check?roomid=${r}`)))}catch(e){return void Ti.info(`直播间${u.roomid}检测异常: ${e.message}`)}var r;if(0!==e)return void Ti.debug(`直播间${u.roomid}检测失败: ${e}-${n}`);if(null===t)return;const i=bo.LOTTERY_EXCLUDE.some((u=>t.award_name.match(u)));if(!bo.LOTTERY_INCLUDE.some((u=>t.award_name.match(u)))&&i)Ti.info(`跳过屏蔽奖品: ${t.award_name}`);else if(t.status!==xs);else if(t.gift_price>0);else{if(t.require_type===Ss||t.require_type===Os)return t;if(t.require_type===Is&&$o.userLevel>=t.require_value)return t}}async function Gs(u){try{const{id:t,gift_id:n,gift_num:r,award_name:i,uid:o,uname:a,require_type:s,require_text:c}=u;Ti.info(`天选主播：【${a}】`),Ti.info(`奖品：${i}`);const{code:D,message:f}=await(e={id:t,gift_id:n,gift_num:r},Sa.post("/xlive/lottery-interface/v1/Anchor/Join",{...e,csrf:bo.BILIJCT,csrf_token:bo.BILIJCT,visit_id:Ai(),platform:"pc"}));if(0!==D)return void Ti.info(`天选失败: ${D}-${f}`);if(Ti.info("天选成功 √"),s===Os){Ei(Ls,o);(function(u){const e=(u=u.replace("关注主播","")).split(/\s*\+\s*/);return e.shift(),e})(c).forEach((u=>Ei(Ls,u)))}}catch(u){Ti.info(`天选异常: ${u.message}`)}var e}async function Ms(u,e,t=2){for(let n=1;n<=t;n++){const t=await Us(u,e,n);for(const u of t)await Gs(u),await So(300)}}var Hs={taskReward:async function(){Ti.info("----【每日任务完成情况】----");try{const{data:u,message:e,code:t}=await Oa.get("/x/member/web/exp/reward");await So();const{data:n}=await Ra();if(0!=t)return void Ti.warn(`状态获取失败: ${t} ${e}`);const r=$o.money-bo.BILI_STAY_COINS;let i=0;0===$o.coinsTask?Ti.info(`今日投币获取经验: ${n}，还需投币0颗，经验够了，不想投了`):r<=0?Ti.info(`今日投币获取经验: ${n}，还需投币0颗，硬币不够了，不投币了`):r<$o.coinsTask?(i=$o.coinsTask-r,Ti.info(`投币获取经验: ${n}，还需投币数量: ${i}颗;(目标${$o.coinsTask}颗，忽略部分投币)`)):(i=$o.coinsTask-n/10,Ti.info(`投币获取经验: ${n}，还需投币数量: ${i}颗;(目标${$o.coinsTask}颗)`)),$o.coinsTask=i,Ti.info("每日分享: "+(u.share?"已完成":"[未完成]")),Ti.info("每日播放: "+(u.watch?"已完成":"[未完成]")),$o.share=u.share,$o.watch=u.watch}catch(u){Ti.error(`状态获取异常 ${u.message}`)}},liveSignTask:async function(){Ti.info("----【直播签到】----");try{const{data:u}=await Sa.get("/xlive/web-ucenter/v1/sign/WebGetSignInfo");if(1===u.status)return Ti.info("已签到，跳过签到"),void Ti.info(`已经签到${u.hadSignDays}天，${u.specialText}`)}catch(u){}try{const{code:u,data:e,message:t}=await Sa.get("/xlive/web-ucenter/v1/sign/DoSign");0===u?Ti.info(`直播签到成功: ${e.text}，特别信息: ${e.specialText}，本月签到天数: ${e.hadSignDays}天;`):Ti.warn(`直播签到失败: ${u} ${t}`)}catch(u){Ti.error(`直播签到异常: ${u.message}`)}},shareAndWatch:async function(){if(Ti.info("----【分享/播放视频】----"),$o.share&&$o.watch)return void Ti.info("已完成，跳过分享/播放");let u=0;try{let e=await ts();if("-1"===e.msg&&(e=await Qa()),"0"!==e.msg)return Ti.warn(`获取视频失败 ${e.msg}`),!1;{const{id:t,author:n,title:r}=e.data;u=t,Ti.info(`获取视频: ${r} --up【${n}】`)}}catch(u){return Ti.error(`获取视频出现异常: ${u.message}`),!1}if(!$o.share){await So();try{const{code:e,message:t}=await function(u){const e={csrf:bo.BILIJCT,aid:u};return Oa.post("/x/web-interface/share/add",e)}(u);0===e?Ti.info("分享视频成功!"):Ti.warn(`分享视频失败: ${e} ${t}`)}catch(u){Ti.error(`分享视频异常: ${u.message}`)}}if(!$o.watch){await So();try{const{code:n,message:r}=await(e=u,t=pi(4,60),Oa.post("/x/click-interface/web/heartbeat",{aid:e,played_time:t}));0===n?Ti.info("播放视频成功!"):Ti.warn(`播放视频失败: ${n} ${r}`)}catch(u){Ti.error(`播放视频异常: ${u.message}`)}}var e,t},silver2Coin:async function(){Ti.info("----【银瓜子兑换硬币】----");try{const{data:u,code:e,message:t}=await Sa.get("/xlive/revenue/v1/wallet/getStatus");if(0!=e&&Ti.info(`获取瓜子详情失败 ${t}`),0===u.silver_2_coin_left)Ti.info("今日已兑换一次");else if(u.silver<700)Ti.info("兑换失败，你瓜子不够了");else{const{message:u}=await Sa.post("/xlive/revenue/v1/wallet/silver2coin",{csrf_token:bo.BILIJCT,csrf:bo.BILIJCT});Ti.info(`兑换硬币： ${u}`),await Sa.get("/xlive/revenue/v1/wallet/myWallet?need_bp=1&need_metal=1&platform=pc")}}catch(u){Ti.error(`操作异常 ${u.message}`)}},addCoins:async function(){if(Ti.info("----【视频投币】----"),!$o.coinsTask)return void Ti.info("跳过投币，今日已完成");const u={eCount:0,num:0,prevCode:0,fillCount:0,priority:0};let e=!1;for(;$o.coinsTask&&!e&&u.eCount<5;)e=await rs(u);u.eCount>=5&&Ti.info("出现异常/错误5次，自动退出投币"),Ti.info(`一共成功投币${u.num}颗`),Ti.info(`硬币还剩${$o.money}颗`)},mangaSign:async function(){Ti.info("----【漫画签到】----");try{const{code:u}=await Ia.post("/twirp/activity.v1.Activity/ClockIn",{platform:e});0==u?Ti.info("漫画签到成功"):Ti.warn("漫画签到失败")}catch(e){var u;400===(null===(u=e.response)||void 0===u?void 0:u.status)?Ti.info("已经签到过了，跳过任务"):Ti.error(`漫画签到异常 ${e.message}`)}var e},supGroupSign:async function(){Ti.info("----【应援团签到】----");const u=await is();await So();let e=0;for(let r=0;r<u.length;){const i=u[r];try{const{data:u,code:r,message:o}=await(t=i.group_id,n=i.owner_uid,xa.get("/link_setting/v1/link_setting/sign_in",{params:{group_id:t,owner_id:n}}));0===r?0===u.status?e++:Ti.info(o):Ti.warn(`[${i.group_name}]签到失败 ${o}`)}catch(u){Ti.error(`签到异常 ${u.message}`)}finally{await So()}}var t,n;Ti.info(`签到结束，成功${e}/${u.length}`)},liveSendMessage:async function(){Ti.info("----【发送直播弹幕】----");const u=await async function(){const{list:u,special_list:e}=await as();return u.push(...e),u}(),e=u.length;let t=0,n=0;Ti.info(`一共需要发送${e}个直播间`),Ti.verbose("所需时间可能很长，请耐心等待");for(let r=0;r<e;r++){const{room_info:i,anchor_info:o,medal:a}=u[r];null!=i&&i.room_id?100===a.today_feed||a.guard_level>0?n++:(await ss(i.room_id,o.nick_name)&&t++,r<e-1&&await So(pi(1e4,25e3))):(Ti.info(`【${o.nick_name}】没有直播间哦`),n++)}Ti.info(`成功发送${t}个弹幕，跳过${n}个`)},charging:async function(){if(Ti.info("----【给目标充电】----"),await cs(),await So(),function(){const u=Ci(),e=u.getDate(),t=li(u),n=bo.CHARGE_PRESET_TIME;return $o.bCoinCouponBalance<2?(Ti.info(`剩余券为${$o.bCoinCouponBalance}，不足2跳过充电`),!1):t===e?(Ti.info("今天是最后一天了"),!0):!(n>e&&(Ti.info(`预设时间为${n}，不符合条件`),1))}())try{const u=$o.bCoinCouponBalance||0,e=bo.CHARGE_ID;let t=0;Ti.info(`b 币券余额${u}`);const n=async()=>{const{code:t,message:n,data:r}=await function(u,e,t=bo.USERID,n,r){return Oa.post("/x/ugcpay/web/v2/trade/elec/pay/quick",{csrf:bo.BILIJCT,bp_num:u,is_bp_remains_prior:e,up_mid:t,otype:n,oid:r})}(u,!0,e);0===t?(Ti.info(`【充值结果】${Ds[r.status]}`),r.status===Ds["成功"]&&($o.chargeOrderNo=r.order_no,await So(),await async function(){try{if(!$o.chargeOrderNo)return!1;const u=si[pi(0,si.length-1)],{code:e}=await function(u,e){return Oa.post("/x/ugcpay/trade/elec/message",{csrf:bo.BILIJCT,message:e,order_id:u})}($o.chargeOrderNo,u);0===e&&Ti.info("留言成功！")}catch{}}())):Ti.warn(`充电失败：${t} ${n}`)};for($o.chargeOrderNo="";!($o.chargeOrderNo||(await n(),await So(),t++>2)););}catch(u){Ti.error(`充电出现异常：${u.message}`)}},getVipPrivilege:async function(){Ti.info("----【领取大会员权益】----"),function(){if(2!==$o.vipType)return Ti.info("账号非年度大会员，不需要领取权益"),!1;const u=Ci(),e=u.getDate(),t=li(u);return 1===e||t===e||(Ti.info("今天非预订领取时间，跳过领取"),!1)}()&&(await ls(1),await ls(2))},giveGift:async function(){Ti.info("----【投喂过期食物】----");try{const u=await ds();if(await So(),null==u||!u.length)return void Ti.info("没有2天内过期的简单礼物");const e=await async function(){const u=Object.assign([],bo.BILI_GIFT_UP),e=()=>u.splice(pi(bo.BILI_GIFT_UP.length-1),1)[0];for(;u.length;){const u=e(),t=await ps(u);if(t)return{mid:u,...t}}return await async function(){const{data:{count:u,items:e}}=await Na();if(await So(),!u)return;const t=e[pi(e.length-1)];return{mid:t.target_id,roomid:t.roomid||0,name:t.uname}}()}();if(!e)return void Ti.info("没有找到投喂目标");await async function({roomid:u,mid:e,name:t},n){for(const r of n){await So();try{const{code:n,message:i,data:o}=await La({roomid:u,ruid:e,bag_id:r.bag_id,gift_id:r.gift_id,gift_num:r.gift_num});if(0!==n){Ti.warn(`向[${t}]投喂[${r.gift_name}]，${i}`);continue}o.gift_list.forEach((u=>{Ti.info(`成功给 [${t}] 投喂${u.gift_name}`)}))}catch{}}}(e,u)}catch(u){Ti.info(`投喂过期食物异常 ${u}`)}},matchGame:async function(){if(Ti.info("----【赛事硬币竞猜】----"),bo.MATCH_COINS<=0)return void Ti.info("硬币数量不能小于 0");if(Es())return;const u=await async function(){try{const{code:t,message:n,data:{list:r,page:i}}=await Oa.get(`/x/esports/guess/collection/question?pn=1&ps=50&gid=&sids=&stime=${u}&etime=${e}`);return 0!==t?void Ti.warn(`获取赛事错误 ${t} ${n}`):0===i.total?(Ti.info("今日已经无法获取赛事"),null):r}catch(u){}var u,e}();if(await So(),!u)return;const e=await async function(u){let e=0;try{for(const t of u){const{contest:u,questions:n}=t,r=u.id,[{id:i,title:o,details:a,is_guess:s}]=n,[c,D]=a;if(Es())return e;if(s)continue;Ti.info(`${o} <=> ${c.odds}:${D.odds}`);const f=c.odds>D.odds;let l;l=bo.MATCH_SELECTION>0?f?D:c:f?c:D,Ti.info(`预测[ ${l.option} ] ${bo.MATCH_COINS} 颗硬币`),await So();const{code:C}=await As(r,i,l.detail_id,bo.MATCH_COINS);0!==C?Ti.info("预测失败"):(e++,$o.money-=bo.MATCH_COINS)}}catch(u){console.warn(u.message)}return e}(function(u,e){return u.filter((u=>{const{questions:t}=u,[{details:n,is_guess:r}]=t;if(r)return!1;const[i,o]=n;return Math.abs(i.odds-o.odds)>=e}))}(u,bo.MATCH_DIFF));Ti.info(`【竞猜结束】一共参与${e}次预测`)},liveHeart:async function(){Ti.info("----【直播心跳】----");const{heartNum:u,fansMedalList:e}=await vs(),t=e&&e.length;if(!t)return void Ti.info("没有勋章列表");const n=Math.ceil(u/t);for(let t=0;t<n;t++)await _s(e,u);Ti.info("完成")},liveLottery:async function(){Ti.info("----【天选时刻】----");try{const u=await async function(){const{data:u,code:e}=await Ua(1,1,0);if(0!==e)throw new Error(`获取最后一个关注失败: ${e}`);return u[0]}();Ti.info(`最后一个关注的UP: ${u.uname}`);const e=await async function(){Ls=[];const u=await ks();for(const e of u)for(const u of e)await Ms(u.areaId,u.parentId,bo.LOTTERY_PAGE_NUM);return Ls}();Ti.info("扫描完成");const t=[];await Ts(t,e,null==u?void 0:u.mid),await async function(u,e){if(0===u.length)return;const t=await $s(e);if(t)for(const e of u){const{code:u,message:n}=await ja(e.mid,t);0!==u&&Ti.warn(`移动【${e.uname}】失败: ${u}-${n}`),await So()}}(t),Ti.info("移动关注UP到分组成功")}catch(u){Ti.warn(`天选时刻异常: ${u.message}`),Ti.debug(u)}Ti.info("结束天选时刻")}};var qs=Object.freeze({__proto__:null,dailyTasks:async function(u,...e){$i.value="";try{await async function(){Ti.info("----【登录】----");const{data:u,message:e,code:t}=await ka();if(0!==t)throw Ti.error(`登录错误 ${t} ${e}`),new Error(e);if(!u.isLogin)throw new Error("接口返回为未登录");await So(),await Ma(u)}()}catch(u){return Ti.error(`登录失败: ${u}`),await $a("登录失败",$i.value),"未完成"}const t=Qo([...Object.values(Hs)]);for(const u of t)await u(),await So();return u&&await u(...e),await $a("每日完成",$i.value),"完成"}});
